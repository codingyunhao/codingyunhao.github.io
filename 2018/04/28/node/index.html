<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Node.js-Notes | Jason.yunhao</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + '8006843039519956000';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
  </script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Node.js-Notes</h1><a id="logo" href="/.">Jason.yunhao</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 主页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/leaveMsg"><i class="fa fa-comments"> 留言板</i></a><a href="/about/"><i class="fa fa-user"> 关于我</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Node.js-Notes</h1><div class="post-meta">Apr 28, 2018<span> | </span><span class="category"><a href="/categories/后端/">后端</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><a class="disqus-comment-count" href="/2018/04/28/node/#vcomment"><span class="valine-comment-count" data-xid="/2018/04/28/node/"></span><span> 条评论</span></a><div class="post-content"><p>node简介</p>
<!--more->



# Node.js-Notes
个人的 Node.js 学习笔记，有兴趣的小伙伴可以了解下，希望能帮到你们。
### 目录
1. [Introduction](#introduction)
    - [简介](#简介)
    - [特点](#特点)
    - [适合开发领域](#适合开发领域)
    - [总结](#总结)
2. [安装Node.js](#install-nodejs)
3. [NPM node.js 模块管理](#npm-nodejs-模块管理)    
    - [NPM简介](#npm简介)
    - [NPM常用命令](#npm常用命令)
4. [开始第一个 node.js web 实例](#开始第一个-nodejs-web-实例)
5. [node.js 回调函数](#nodejs-回调函数)
    - [1. 同步操作文件(阻塞I/O)](#1-同步操作文件阻塞io)     
    - [2. 异步操作文件(非阻塞I/O)](#2-异步操作文件非阻塞io)
6. [Node.js 事件循环](#nodejs-事件循环)
    - [自定义模块](#自定义模块)
7. [Node.js 函数](#nodejs-函数)
    - [常用函数](#常用函数)
    - [匿名函数](#匿名函数)
8. [Node.js 路由](#nodejs-路由)
9. [Node.js 全局对象](#nodejs-全局对象)
    - [__filename](#__filename)
    - [__dirname](#__dirname)
    - [console](#console)
    - [process](#process)
10. [Node.js 常用工具](#nodejs-常用工具)
    - [util.inspect 将任意对象转换 为字符串](#utilinspect-将任意对象转换-为字符串)
    - [util.isArray() 判断是否是数组](#utilisarray-判断是否是数组)
    - [util.isBoolean() 判断是否是boolean类型的](#utilisboolean-判断是否是boolean类型的)
    - [util.isDate() 判断是否是日期](#utilisdate-判断是否是日期)
    - [util.isFunction() 判断是否是函数](#utilisfunction-判断是否是函数)
    - [util.isObject() 判断是否是对象](#utilisobject-判断是否是对象)
    - [util.isRegExp() 是否是正则对象](#utilisregexp-是否是正则对象)
11. [文件系统](#文件系统)
    - [读文件内容](#读文件内容)
        - [1. 异步非堵塞读取](#1-异步非堵塞读取)
        - [2. 同步堵塞读取](#2-同步堵塞读取)
    - [写文件内容](#写文件内容)
    - [删除文件](#删除文件)
    - [创建目录](#创建目录)
    - [删除目录](#删除目录)
12. [GET和POST请求](#get和post请求)
    - [GET请求](#get请求)
    - [POST请求](#post请求)
13. [工具模块](#工具模块)
    - [OS模块](#os模块)
    - [Path模块](#path模块)
    - [Net模块](#net模块)
    - [DNS模块](#dns模块)
    - [Domain模块](#domain模块)
14. [MySql](#mysql)
    - [查询数据](#查询数据)
    - [插入数据](#插入数据)
    - [更新数据](#更新数据)
    - [删除数据](#删除数据)
15. [HTTP模块](#http模块)
16. [静态文件夹](#静态文件夹)

# Introduction
## 简介 
> Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。<br> 
Node.js 使用了一个事件驱动、非阻塞式 I/O 的模型，使其轻量又高效。<br> 
Node.js 的包管理器 npm，是全球最大的开源库生态系统。

## 特点
### 单线程
![单线程](http://i.imgur.com/aX2lBae.png)
> 在Java、PHP或者.net等服务器端语言中，会为每一个客户端连接创建一个新的线程。而每个线程需要耗费大约2MB内存。也就是说，理论上，一个8GB内存的服务器可以同时连接的最大用户数为4000个左右。要让Web应用程序支持更多的用户，就需要增加服务器的数量，而Web应用程序的硬件成本当然就上升了。<br>
Node.js不为每个客户连接创建一个新的线程，而仅仅使用一个线程。当有用户连接了，就触发一个内部事件，通过非阻塞I/O、事件驱动机制，让Node.js程序宏观上也是并行的。使用Node.js，一个8GB内存的服务器，可以同时处理超过4万用户的连接。<br>
另外，带线程的带来的好处，还有操作系统完全不再有线程创建、销毁的时间开销。
坏处，就是一个用户造成了线程的崩溃，整个服务都崩溃了，其他人也崩溃了。

### 非阻塞I/O non-blocking I/O 
> 例如，当在访问数据库取得数据的时候，需要一段时间。在传统的单线程处理机制中，在执行了访问数据库代码之后，整个线程都将暂停下来，等待数据库返回结果，才能执行后面的代码。也就是说，I/O阻塞了代码的执行，极大地降低了程序的执行效率。<br>
由于Node.js中采用了非阻塞型I/O机制，因此在执行了访问数据库的代码之后，将立即转而执行其后面的代码，把数据库返回结果的处理代码放在回调函数中，从而提高了程序的执行效率。<br>
当某个I/O执行完毕时，将以事件的形式通知执行I/O操作的线程，线程执行这个事件的回调函数。为了处理异步I/O，线程必须有事件循环，不断的检查有没有未处理的事件，依次予以处理。<br>
阻塞模式下，一个线程只能处理一项任务，要想提高吞吐量必须通过多线程。而非阻塞模式下，一个线程永远在执行计算操作，这个线程的CPU核心利用率永远是100%。所以，这是一种特别有哲理的解决方案：与其人多，但是好多人闲着；还不如一个人玩命，往死里干活儿。

### 事件驱动 event-driven
> 在Node中，客户端请求建立连接，提交数据等行为，会触发相应的事件。在Node中，在一个时刻，只能执行一个事件回调函数，但是在执行一个事件回调函数的中途，可以转而处理其他事件（比如，又有新用户连接了），然后返回继续执行原事件的回调函数，这种处理机制，称为“事件环”机制。<br>
Node.js底层是C++（V8也是C++写的）。底层代码中，近半数都用于事件队列、回调函数队列的构建。用事件驱动来完成服务器的任务调度，这是鬼才才能想到的。针尖上的舞蹈，用一个线程，担负起了处理非常多的任务的使命。

## 适合开发领域
> Node.js 善于I/O，不善于计算。因为Node.js最擅长的就是任务调度，如果你的业务有很多的CPU计算，实际上也相当于这个计算阻塞了这个单线程，就不适合Node开发。<br>
> 当应用程序需要处理大量并发的I/O，而在向客户端发出响应之前，应用程序内部并不需要进行非常复杂的处理的时候，Node.js非常适合。Node.js也非常适合与web socket配合，开发长连接的实时交互应用程序。<br>
> 比如:<br>
> - 用户表单收集
> - 考试系统
> - 聊天室
> - 图文直播
> - 提供JSON的API（为前台Angular使用）

## 总结
![原理图](http://i.imgur.com/DPHgbYn.png)
> 单线程，单线程的好处，减少了内存开销，操作系统的内存换页。如果某一个事情，进入了，但是被I/O阻塞了，所以这个线程就阻塞了。<br>
> 非阻塞I/O， 不会傻等I/O语句结束，而会执行后面的语句。<br>
> 事件机制，事件环，不管是新用户的请求，还是老用户的I/O完成，都将以事件方式加入事件环，等待调度。


# Install Node.js
1. 下载node.js

    前往[https://nodejs.org/en/](https://nodejs.org/en/ "https://nodejs.org/en/")下载node.js稳定版
    ![下载稳定版](http://i.imgur.com/1byvubu.png)


2. 安装环境(windows 7 64位环境下)

    - 一直Next就可以了

    ![安装](http://i.imgur.com/gRew5uL.png)

    - 在终端直接查看node.js的版本，查询到即安装成功

    ![安装完成](http://i.imgur.com/awvnLdR.png)


3. 结合Sublime开发

    - 创建新的编译环境

      ![创建新编译环境](http://i.imgur.com/IDga1Cv.png)
    - 在里面写入
    <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">"cmd"</span>: [<span class="string">"node"</span>, <span class="string">"<span class="variable">$file</span>"</span>],</span><br><span class="line">	<span class="string">"selector"</span>: <span class="string">"source.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>- 保存并重命名

![保存并重命名](http://i.imgur.com/Jzs3iNo.png)
- 写一个js文件，输出Hello World.按Ctrl+B进行编译，如果无反应，请重启sublime，出现Hello World即为成功

![sublime](http://i.imgur.com/LXs03iI.png)
</code></pre><h1 id="NPM-node-js-模块管理"><a href="#NPM-node-js-模块管理" class="headerlink" title="NPM node.js 模块管理"></a>NPM node.js 模块管理</h1><h2 id="NPM简介"><a href="#NPM简介" class="headerlink" title="NPM简介"></a>NPM简介</h2><blockquote>
<p>NPM是随同NodeJS一起安装的包管理工具，能解决NodeJS代码部署上的很多问题，常见的使用场景有以下几种：</p>
<ul>
<li>允许用户从NPM服务器下载别人编写的第三方包到本地使用。</li>
<li>允许用户从NPM服务器下载并安装别人编写的命令行程序到本地使用。</li>
<li>允许用户将自己编写的包或命令行程序上传到NPM服务器供别人使用。</li>
</ul>
</blockquote>
<h2 id="NPM常用命令"><a href="#NPM常用命令" class="headerlink" title="NPM常用命令"></a>NPM常用命令</h2><ol>
<li><code>npm list</code><br> 查看本地模块</li>
<li><code>npm install mysql</code><br> 安装mysql模块</li>
<li><code>npm uninstall mysql</code><br> 卸载mysql模块</li>
<li><code>npm root</code><br> 本地模块根目录</li>
<li><code>npm root -g</code><br> 本服务器所有模块根目录</li>
<li><code>npm update mysql</code><br> 升级mysql模块</li>
<li><code>npm search mysql</code><br> 搜索mysql模块</li>
<li><code>npm -help &lt;command&gt;</code><br> 查看帮助</li>
</ol>
<h1 id="开始第一个-node-js-web-实例"><a href="#开始第一个-node-js-web-实例" class="headerlink" title="开始第一个 node.js web 实例"></a>开始第一个 node.js web 实例</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载http web模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line">cs = <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">	<span class="comment">//设置head头</span></span><br><span class="line">	res.writeHead(<span class="string">'200'</span>,&#123;<span class="string">'content-type'</span>:<span class="string">'text/html;charset=utf-8'</span>&#125;);</span><br><span class="line">	<span class="comment">//给客户端返回内容</span></span><br><span class="line">	res.write(<span class="string">'hello world! Gavin first Node.js Web'</span>); </span><br><span class="line">	res.end();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">http.createServer(cs).listen(<span class="number">666</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'http is ok'</span>);</span><br></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/uqEFm2H.png" alt="第一个web应用"></p>
<h1 id="node-js-回调函数"><a href="#node-js-回调函数" class="headerlink" title="node.js 回调函数"></a>node.js 回调函数</h1><blockquote>
<p>Node.js 异步编程的直接体现就是回调。<br>异步编程依托于回调来实现，但不能说使用了回调后程序就异步化了。<br>回调函数在完成任务后就会被调用，Node 使用了大量的回调函数，Node 所有 API 都支持回调函数。<br>例如，我们可以一边读取文件，一边执行其他命令，在文件读取完成后，我们将文件内容作为回调函数的参数返回。这样在执行代码时就没有阻塞或等待文件 I/O 操作。这就大大提高了 Node.js 的性能，可以处理大量的并发请求。</p>
</blockquote>
<h2 id="1-同步操作文件-阻塞I-O"><a href="#1-同步操作文件-阻塞I-O" class="headerlink" title="1. 同步操作文件(阻塞I/O)"></a>1. 同步操作文件(阻塞I/O)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载fs file 模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">file = <span class="string">"test.txt"</span>;</span><br><span class="line"><span class="comment">//开始读取文件</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'file start'</span>);</span><br><span class="line"><span class="comment">//正在读取文件</span></span><br><span class="line">data = fs.readFileSync(file);</span><br><span class="line"><span class="built_in">console</span>.log(data.toString());</span><br><span class="line"><span class="comment">//读取文件结束</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'file end！'</span>);</span><br></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/PuaItru.png" alt="同步操作文件"></p>
<h2 id="2-异步操作文件-非阻塞I-O"><a href="#2-异步操作文件-非阻塞I-O" class="headerlink" title="2. 异步操作文件(非阻塞I/O)"></a>2. 异步操作文件(非阻塞I/O)</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载fs file 模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">file = <span class="string">"test.txt"</span>;</span><br><span class="line"><span class="comment">//开始读取文件</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'file start'</span>);</span><br><span class="line"><span class="comment">//正在读取文件</span></span><br><span class="line"><span class="comment">//自带事件(当文件内容读取完毕时)</span></span><br><span class="line">fs.readFile(file,<span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">	 <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//读取文件结束</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'file end！'</span>);</span><br></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/kX5fFsu.png" alt="异步操作文件"></p>
<h1 id="Node-js-事件循环"><a href="#Node-js-事件循环" class="headerlink" title="Node.js 事件循环"></a>Node.js 事件循环</h1><blockquote>
<p>Node.js 是单进程单线程应用程序，但是通过事件和回调支持并发，所以性能非常高。<br><br>Node.js 的每一个 API 都是异步的，并作为一个独立线程运行，使用异步函数调用，并处理并发。<br><br>Node.js 基本上所有的事件机制都是用设计模式中观察者模式实现。<br><br>Node.js 单线程类似进入一个while(true)的事件循环，直到没有事件观察者退出，每个异步事件都生成一个事件观察者，如果有事件发生就调用该回调函数.<br></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> events = <span class="built_in">require</span>(<span class="string">'events'</span>);</span><br><span class="line">evt = <span class="keyword">new</span> events.EventEmitter();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eventHandler</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'run'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//当触发eventName时，调用eventHandler</span></span><br><span class="line">evt.on(<span class="string">'eventName'</span>,eventHandler);</span><br><span class="line"><span class="comment">//触发eventName</span></span><br><span class="line">evt.emit(<span class="string">'eventName'</span>);</span><br></pre></td></tr></table></figure>
<h1 id="Node-js-模块"><a href="#Node-js-模块" class="headerlink" title="Node.js 模块"></a>Node.js 模块</h1><blockquote>
<p>为了让Node.js的文件可以相互调用，Node.js提供了一个简单的模块系统。<br><br>模块是Node.js 应用程序的基本组成部分，文件和模块是一一对应的。换言之，一个 Node.js 文件就是一个模块，这个文件可能是JavaScript 代码、JSON 或者编译过的C/C++ 扩展。</p>
</blockquote>
<h2 id="自定义模块"><a href="#自定义模块" class="headerlink" title="自定义模块"></a>自定义模块</h2><p>在demo.js同级目录下创建show.js，编写模块代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义show模块</span></span><br><span class="line"><span class="comment">// 定义show类</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = <span class="string">'user'</span>;</span><br><span class="line">	<span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'my name is '</span> + <span class="keyword">this</span>.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">new</span> show();</span><br></pre></td></tr></table></figure></p>
<p>在demo.js文件中调用我们自定义的show模块<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//调用自定义模块</span></span><br><span class="line"><span class="keyword">const</span> show = <span class="built_in">require</span>(<span class="string">'./show'</span>);</span><br><span class="line">show.say();</span><br></pre></td></tr></table></figure></p>
<h1 id="Node-js-函数"><a href="#Node-js-函数" class="headerlink" title="Node.js 函数"></a>Node.js 函数</h1><h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'show'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'show'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Node-js-路由"><a href="#Node-js-路由" class="headerlink" title="Node.js 路由"></a>Node.js 路由</h1><p>自己写个路由，一般实际应用大多是直接用框架<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line">cs = <span class="function"><span class="keyword">function</span>(<span class="params">request,res</span>)</span>&#123;</span><br><span class="line">	urlStr = request.url; <span class="comment">//获取访问url路径字符串</span></span><br><span class="line">	urlPath = url.parse(urlStr).pathname; <span class="comment">//转换url路径</span></span><br><span class="line">	res.writeHead(<span class="string">'200'</span>,&#123;<span class="string">'content-type'</span>:<span class="string">'text/html;charset=utf-8'</span>&#125;);</span><br><span class="line">	<span class="keyword">switch</span> (urlPath) &#123; <span class="comment">//选择页面</span></span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/index'</span>:</span><br><span class="line">			res.write(<span class="string">'index page'</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/add'</span>:</span><br><span class="line">			res.write(<span class="string">'add page'</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/delete'</span>:</span><br><span class="line">			res.write(<span class="string">'delete page'</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/update'</span>:</span><br><span class="line">			res.write(<span class="string">'update page'</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/sreach'</span>:</span><br><span class="line">			res.write(<span class="string">'sreach'</span>);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			res.write(<span class="string">'undefined page'</span>);</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"访问的url路径:"</span>+urlPath);</span><br><span class="line">	res.end();</span><br><span class="line">&#125;</span><br><span class="line">http.createServer(cs).listen(<span class="number">666</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Server Is Running Successfully!'</span>);</span><br></pre></td></tr></table></figure></p>
<p><img src="http://i.imgur.com/NAGU7hj.png" alt="路由"></p>
<h1 id="Node-js-全局对象"><a href="#Node-js-全局对象" class="headerlink" title="Node.js 全局对象"></a>Node.js 全局对象</h1><h2 id="filename"><a href="#filename" class="headerlink" title="__filename"></a>__filename</h2><p>本文件全路径<br><br><code>console.log(__filename);</code><br><br>输出：D:\NodeWorkSpace\demo.js</p>
<h2 id="dirname"><a href="#dirname" class="headerlink" title="__dirname"></a>__dirname</h2><p>表示当前执行脚本所在的目录。<br><br><code>console.log(__dirname);</code><br><br>输出：D:\NodeWorkSpace</p>
<h2 id="console"><a href="#console" class="headerlink" title="console"></a>console</h2><ol>
<li><code>console.log</code> 向标准输出流打印字符并以换行符结束</li>
<li><code>console.info</code> 该命令的作用是返回信息性消息，这个命令与console.log差别并不大，除了在chrome中只会输出文字外，其余的会显示一个蓝色的惊叹号。</li>
<li><code>console.warn</code> 输出警告消息。控制台出现有黄色的惊叹号。</li>
<li><code>console.error</code> 输出错误消息的。控制台在出现错误时会显示是红色的叉子。</li>
<li><code>console.time</code>输出时间，表示计时开始。</li>
<li><code>console.timeEnd</code>结束时间，表示计时结束</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"log"</span>);</span><br><span class="line"><span class="built_in">console</span>.info(<span class="string">"information"</span>);</span><br><span class="line"><span class="built_in">console</span>.warn(<span class="string">"warn"</span>);</span><br><span class="line"><span class="built_in">console</span>.error(<span class="string">"error"</span>);</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'x'</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= <span class="number">100000</span>; i++) &#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'x'</span>);</span><br></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/pMfXeKB.png" alt="console"></p>
<h2 id="process"><a href="#process" class="headerlink" title="process"></a>process</h2><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><ol>
<li><code>stdout</code> 标准输出流。</li>
<li><code>stderr</code> 标准错误流。</li>
<li><code>stdin</code> 标准输入流。</li>
<li><code>argv</code> argv 属性返回一个数组，由命令行执行脚本时的各个参数组成。它的第一个成员总是node，第二个成员是脚本文件名，其余成员是脚本文件的参数。</li>
<li><code>execPath</code> 返回执行当前脚本的 Node 二进制文件的绝对路径。</li>
<li><code>execArgv</code> 返回一个数组，成员是命令行下执行脚本时，在Node可执行文件与脚本文件之间的命令行参数。</li>
<li><code>env</code> 返回一个对象，成员为当前 shell 的环境变量</li>
<li><code>exitCode</code> 进程退出时的代码，如果进程优通过 process.exit() 退出，不需要指定退出码。</li>
<li><code>version</code> Node 的版本，比如v0.10.18。</li>
<li><code>versions</code> 一个属性，包含了 node 的版本和依赖.</li>
<li><code>config</code> 一个包含用来编译当前 node 执行文件的 javascript 配置选项的对象。它与运行 ./configure 脚本生成的 “config.gypi” 文件相同。</li>
<li><code>pid</code> 当前进程的进程号。</li>
<li><code>title</code> 进程名，默认值为”node”，可以自定义该值。</li>
<li><code>arch</code> 当前 CPU 的架构：’arm’、’ia32’ 或者 ‘x64’。</li>
<li><code>platform</code> 运行程序所在的平台系统 ‘darwin’, ‘freebsd’, ‘linux’, ‘sunos’ 或 ‘win32’</li>
<li><code>mainModule</code> require.main 的备选方法。不同点，如果主模块在运行时改变，require.main可能会继续返回老的模块。可以认为，这两者引用了同一个模块。</li>
</ol>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ol>
<li><code>abort()</code> 这将导致 node 触发 abort 事件。会让 node 退出并生成一个核心文件。</li>
<li><code>chdir(directory)</code> 改变当前工作进程的目录，如果操作失败抛出异常。</li>
<li><code>cwd()</code> 返回当前进程的工作目录</li>
<li><code>exit([code])</code> 使用指定的 code 结束进程。如果忽略，将会使用 code 0。</li>
<li><code>getgid()</code> 获取进程的群组标识（参见 getgid(2)）。获取到得时群组的数字 id，而不是名字。</li>
<li>注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</li>
<li><code>setgid(id)</code> 设置进程的群组标识（参见 setgid(2)）。可以接收数字 ID 或者群组名。如果指定了群组名，会阻塞等待解析为数字 ID 。</li>
<li>注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</li>
<li><code>getuid()</code> 获取进程的用户标识(参见 getuid(2))。这是数字的用户 id，不是用户名。</li>
<li>注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</li>
<li><code>setuid(id)</code> 设置进程的用户标识（参见setuid(2)）。接收数字 ID或字符串名字。果指定了群组名，会阻塞等待解析为数字 ID 。</li>
<li>注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</li>
<li><code>getgroups()</code> 返回进程的群组 iD 数组。POSIX 系统没有保证一定有，但是 node.js 保证有。</li>
<li>注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</li>
<li><code>setgroups(groups)</code> 设置进程的群组 ID。这是授权操作，所有你需要有 root 权限，或者有 CAP_SETGID 能力。</li>
<li>注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</li>
<li><code>initgroups(user, extra_group)</code> 读取 /etc/group ，并初始化群组访问列表，使用成员所在的所有群组。这是授权操作，所有你需要有 root 权限，或者有 CAP_SETGID 能力。</li>
<li>注意：这个函数仅在 POSIX 平台上可用(例如，非Windows 和 Android)。</li>
<li><code>kill(pid[, signal])</code> 发送信号给进程. pid 是进程id，并且 signal 是发送的信号的字符串描述。信号名是字符串，比如 ‘SIGINT’ 或 ‘SIGHUP’。如果忽略，信号会是 ‘SIGTERM’。</li>
<li><code>memoryUsage()</code> 返回一个对象，描述了 Node 进程所用的内存状况，单位为字节。</li>
<li><code>nextTick(callback)</code> 一旦当前事件循环结束，调用回到函数。</li>
<li><code>umask([mask])</code> 设置或读取进程文件的掩码。子进程从父进程继承掩码。如果mask 参数有效，返回旧的掩码。否则，返回当前掩码。</li>
<li><code>uptime()</code> 返回 Node 已经运行的秒数。</li>
<li><code>hrtime()</code> 返回当前进程的高分辨时间，形式为 [seconds, nanoseconds]数组。它是相对于过去的任意事件。该值与日期无关，因此不受时钟漂移的影响。主要用途是可以通过精确的时间间隔，来衡量程序的性能。你可以将之前的结果传递给当前的 process.hrtime() ，会返回两者间的时间差，用来基准和测量时间间隔。</li>
</ol>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">version = process.version;</span><br><span class="line"><span class="built_in">console</span>.log(version);</span><br><span class="line">cwd = process.cwd();</span><br><span class="line"><span class="built_in">console</span>.log(cwd);</span><br></pre></td></tr></table></figure>
<p>输出：<br>v6.11.0<br>D:\NodeWorkSpace</p>
<h1 id="Node-js-常用工具"><a href="#Node-js-常用工具" class="headerlink" title="Node.js 常用工具"></a>Node.js 常用工具</h1><ol>
<li><h3 id="util-inspect-将任意对象转换-为字符串"><a href="#util-inspect-将任意对象转换-为字符串" class="headerlink" title="util.inspect() 将任意对象转换 为字符串"></a><code>util.inspect()</code> 将任意对象转换 为字符串</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载模块</span></span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>);</span><br><span class="line">obj = &#123;<span class="string">'name'</span>:<span class="string">'Gavin'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="string">'16'</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(obj));</span><br><span class="line"><span class="built_in">console</span>.log(util.inspect(obj));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(util.inspect(obj)));</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>输出：<br>object<br>{ name: ‘Gavin’, sex: ‘male’, age: ‘16’ }<br>string</p>
<ol start="2">
<li><h3 id="util-isArray-判断是否是数组"><a href="#util-isArray-判断是否是数组" class="headerlink" title="util.isArray() 判断是否是数组"></a><code>util.isArray()</code> 判断是否是数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载模块</span></span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>);</span><br><span class="line">arr = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(util.isArray(arr));</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<blockquote>
<p>输出：true</p>
<ol start="3">
<li><h3 id="util-isBoolean-判断是否是boolean类型的"><a href="#util-isBoolean-判断是否是boolean类型的" class="headerlink" title="util.isBoolean() 判断是否是boolean类型的"></a><code>util.isBoolean()</code> 判断是否是boolean类型的</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载模块</span></span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>);</span><br><span class="line">obj = &#123;<span class="string">'name'</span>:<span class="string">'Gavin'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="string">'16'</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(util.isBoolean(obj));</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<blockquote>
<p>输出：false</p>
<ol start="4">
<li><h3 id="util-isDate-判断是否是日期"><a href="#util-isDate-判断是否是日期" class="headerlink" title="util.isDate() 判断是否是日期"></a><code>util.isDate()</code> 判断是否是日期</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载模块</span></span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>);</span><br><span class="line">tobj = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="built_in">console</span>.log(util.isDate(tobj))</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<blockquote>
<p>输出：true</p>
<ol start="5">
<li><h3 id="util-isFunction-判断是否是函数"><a href="#util-isFunction-判断是否是函数" class="headerlink" title="util.isFunction() 判断是否是函数"></a><code>util.isFunction()</code> 判断是否是函数</h3></li>
<li><h3 id="util-isObject-判断是否是对象"><a href="#util-isObject-判断是否是对象" class="headerlink" title="util.isObject() 判断是否是对象"></a><code>util.isObject()</code> 判断是否是对象</h3></li>
<li><h3 id="util-isRegExp-是否是正则对象"><a href="#util-isRegExp-是否是正则对象" class="headerlink" title="util.isRegExp() 是否是正则对象"></a><code>util.isRegExp()</code> 是否是正则对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载模块</span></span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(util.isRegExp(<span class="regexp">/^\d&#123;11&#125;$/ig</span>));</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<blockquote>
<p>输出：true</p>
</blockquote>
<h1 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h1><blockquote>
<p>这里写个测试的文件<code>test.txt</code>内容如下<br>11111<br>22222<br>33333<br>44444<br>55555<br>66666</p>
</blockquote>
<h2 id="读文件内容"><a href="#读文件内容" class="headerlink" title="读文件内容"></a>读文件内容</h2><h3 id="1-异步非堵塞读取"><a href="#1-异步非堵塞读取" class="headerlink" title="1. 异步非堵塞读取"></a>1. 异步非堵塞读取</h3><blockquote>
<p>readFile();</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//加载文件模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">file = <span class="string">'test.txt'</span>;</span><br><span class="line"><span class="comment">//异步读取</span></span><br><span class="line">fs.readFile(file,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">	str = data.toString();</span><br><span class="line">	<span class="built_in">console</span>.log(str);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'file read end！'</span>);</span><br></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/DmcVEga.png" alt="异步"></p>
<h3 id="2-同步堵塞读取"><a href="#2-同步堵塞读取" class="headerlink" title="2. 同步堵塞读取"></a>2. 同步堵塞读取</h3><blockquote>
<p>readFileSync();</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载文件模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">file = <span class="string">'test.txt'</span>;</span><br><span class="line"><span class="comment">//同步读取</span></span><br><span class="line">data = fs.readFileSync(file);</span><br><span class="line">str = data.toString();</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/koKPCZT.png" alt="同步读取"></p>
<h2 id="写文件内容"><a href="#写文件内容" class="headerlink" title="写文件内容"></a>写文件内容</h2><blockquote>
<p>writeFile();</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">file = <span class="string">'test1.txt'</span>;</span><br><span class="line">str  = <span class="string">"1111\n2222\n3333"</span>;</span><br><span class="line"><span class="comment">// 文件异步写入</span></span><br><span class="line">fs.writeFile(file,str);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'file write end！'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>因为之前没有file1.txt所以就创建了一个新的文件夹</p>
</blockquote>
<p><img src="http://i.imgur.com/cEqt4Iu.png" alt=""><br><br><img src="http://i.imgur.com/lcoO6Ym.png" alt="写入文件内容"></p>
<h2 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h2><blockquote>
<p>unlink();</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载文件模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">file = <span class="string">'test1.txt'</span>;</span><br><span class="line">fs.unlink(file);</span><br></pre></td></tr></table></figure>
<h2 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h2><blockquote>
<p>mkdir();</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载文件模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">file = <span class="string">'testdir'</span>;</span><br><span class="line">fs.mkdir(file);</span><br></pre></td></tr></table></figure>
<h2 id="删除目录"><a href="#删除目录" class="headerlink" title="删除目录"></a>删除目录</h2><blockquote>
<p>rmdir();</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载文件模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">file = <span class="string">'testdir'</span>;</span><br><span class="line">fs.rmdir(file);</span><br></pre></td></tr></table></figure>
<h1 id="GET和POST请求"><a href="#GET和POST请求" class="headerlink" title="GET和POST请求"></a>GET和POST请求</h1><h2 id="GET请求"><a href="#GET请求" class="headerlink" title="GET请求"></a>GET请求</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载web模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="comment">//加载url模块</span></span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="comment">//加载querystring模块</span></span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">'querystring'</span>);</span><br><span class="line"></span><br><span class="line">cs = <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	uri = req.url;</span><br><span class="line">	<span class="keyword">if</span> (uri !== <span class="string">'/favicon.ico'</span>) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(uri);</span><br><span class="line">		<span class="comment">// 获取get参数字符串</span></span><br><span class="line">		str = url.parse(uri).query;</span><br><span class="line">		<span class="built_in">console</span>.log(str);</span><br><span class="line">		<span class="comment">// 将参数字符串转换为json对象</span></span><br><span class="line">		json = querystring.parse(str);</span><br><span class="line">		<span class="built_in">console</span>.log(json);</span><br><span class="line">		res.write(<span class="string">'Gavin\' Web server !'</span>);</span><br><span class="line">		res.end();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">http.createServer(cs).listen(<span class="number">666</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Http Is Running Successfully!'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在浏览器输入url地址 <a href="http://localhost:666/index?id=1&amp;name=Gavin">http://localhost:666/index?id=1&amp;name=Gavin</a></p>
</blockquote>
<p><img src="http://i.imgur.com/Pi0Ciw2.png" alt=""><br><img src="http://i.imgur.com/47kM23w.png" alt=""></p>
<h2 id="POST请求"><a href="#POST请求" class="headerlink" title="POST请求"></a>POST请求</h2><blockquote>
<p>POST请求代码</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 加载web模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="comment">// 加载querystring模块</span></span><br><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">'querystring'</span>);</span><br><span class="line"><span class="comment">// 加载工具模块</span></span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>);</span><br><span class="line"><span class="comment">// 服务器回调函数</span></span><br><span class="line">cs = <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">	<span class="comment">// 定义了一个post变量，用于暂存请求体的信息</span></span><br><span class="line">    <span class="keyword">var</span> post = <span class="string">''</span>;     </span><br><span class="line">    <span class="comment">// 通过req的data事件监听函数，每当接受到请求体的数据，就累加到post变量中</span></span><br><span class="line">    req.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>)</span>&#123; </span><br><span class="line">    	<span class="built_in">console</span>.log(<span class="string">"chunk:"</span>+chunk);   </span><br><span class="line">        post += chunk;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 在end事件触发后，通过querystring.parse将post解析为真正的POST请求格式，然后向客户端返回。</span></span><br><span class="line">    req.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;    </span><br><span class="line">        post = querystring.parse(post);</span><br><span class="line">        res.end(util.inspect(post));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">http.createServer(cs).listen(<span class="number">666</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Http Is Running Successfully!'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>POST请求测试页面</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Post请求测试页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"http://localhost:666/"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"Name"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"Age"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/cajISzH.png" alt=""><br><br><img src="http://i.imgur.com/yiDU9tI.png" alt=""><br><img src="http://i.imgur.com/T8vinq3.png" alt=""></p>
<h1 id="工具模块"><a href="#工具模块" class="headerlink" title="工具模块"></a>工具模块</h1><blockquote>
<p>一些基本的系统操作函数</p>
</blockquote>
<h2 id="OS模块"><a href="#OS模块" class="headerlink" title="OS模块"></a>OS模块</h2><h3 id="方法-1"><a href="#方法-1" class="headerlink" title="方法"></a>方法</h3><h4 id="os-tmpdir-返回操作系统的默认临时文件夹。"><a href="#os-tmpdir-返回操作系统的默认临时文件夹。" class="headerlink" title="os.tmpdir() 返回操作系统的默认临时文件夹。"></a><code>os.tmpdir()</code> 返回操作系统的默认临时文件夹。</h4><h4 id="os-endianness-返回-CPU-的字节序，可能的是-“BE”-或-“LE”。"><a href="#os-endianness-返回-CPU-的字节序，可能的是-“BE”-或-“LE”。" class="headerlink" title="os.endianness() 返回 CPU 的字节序，可能的是 “BE” 或 “LE”。"></a><code>os.endianness()</code> 返回 CPU 的字节序，可能的是 “BE” 或 “LE”。</h4><h4 id="os-hostname-返回操作系统的主机名。"><a href="#os-hostname-返回操作系统的主机名。" class="headerlink" title="os.hostname() 返回操作系统的主机名。"></a><code>os.hostname()</code> 返回操作系统的主机名。</h4><h4 id="os-type-返回操作系统名"><a href="#os-type-返回操作系统名" class="headerlink" title="os.type() 返回操作系统名"></a><code>os.type()</code> 返回操作系统名</h4><h4 id="os-platform-返回操作系统名"><a href="#os-platform-返回操作系统名" class="headerlink" title="os.platform() 返回操作系统名"></a><code>os.platform()</code> 返回操作系统名</h4><h4 id="os-arch-返回操作系统-CPU-架构，可能的值有-“x64”、”arm”-和-“ia32”。"><a href="#os-arch-返回操作系统-CPU-架构，可能的值有-“x64”、”arm”-和-“ia32”。" class="headerlink" title="os.arch() 返回操作系统 CPU 架构，可能的值有 “x64”、”arm” 和 “ia32”。"></a><code>os.arch()</code> 返回操作系统 CPU 架构，可能的值有 “x64”、”arm” 和 “ia32”。</h4><h4 id="os-release-返回操作系统的发行版本。"><a href="#os-release-返回操作系统的发行版本。" class="headerlink" title="os.release() 返回操作系统的发行版本。"></a><code>os.release()</code> 返回操作系统的发行版本。</h4><h4 id="os-uptime-返回操作系统运行的时间，以秒为单位。"><a href="#os-uptime-返回操作系统运行的时间，以秒为单位。" class="headerlink" title="os.uptime() 返回操作系统运行的时间，以秒为单位。"></a><code>os.uptime()</code> 返回操作系统运行的时间，以秒为单位。</h4><h4 id="os-loadavg-返回一个包含-1、5、15-分钟平均负载的数组。"><a href="#os-loadavg-返回一个包含-1、5、15-分钟平均负载的数组。" class="headerlink" title="os.loadavg() 返回一个包含 1、5、15 分钟平均负载的数组。"></a><code>os.loadavg()</code> 返回一个包含 1、5、15 分钟平均负载的数组。</h4><h4 id="os-totalmem-返回系统内存总量，单位为字节。"><a href="#os-totalmem-返回系统内存总量，单位为字节。" class="headerlink" title="os.totalmem() 返回系统内存总量，单位为字节。"></a><code>os.totalmem()</code> 返回系统内存总量，单位为字节。</h4><h4 id="os-freemem-返回操作系统空闲内存量，单位是字节。"><a href="#os-freemem-返回操作系统空闲内存量，单位是字节。" class="headerlink" title="os.freemem() 返回操作系统空闲内存量，单位是字节。"></a><code>os.freemem()</code> 返回操作系统空闲内存量，单位是字节。</h4><h4 id="os-cpus-返回一个对象数组，包含所安装的每个-CPU-内核的信息：型号、速度（单位-MHz）、时间（一个包含-user、nice、sys、idle-和-irq-所使用-CPU-内核毫秒数的对象）。"><a href="#os-cpus-返回一个对象数组，包含所安装的每个-CPU-内核的信息：型号、速度（单位-MHz）、时间（一个包含-user、nice、sys、idle-和-irq-所使用-CPU-内核毫秒数的对象）。" class="headerlink" title="os.cpus() 返回一个对象数组，包含所安装的每个 CPU/内核的信息：型号、速度（单位 MHz）、时间（一个包含 user、nice、sys、idle 和 irq 所使用 CPU/内核毫秒数的对象）。"></a><code>os.cpus()</code> 返回一个对象数组，包含所安装的每个 CPU/内核的信息：型号、速度（单位 MHz）、时间（一个包含 user、nice、sys、idle 和 irq 所使用 CPU/内核毫秒数的对象）。</h4><h4 id="os-networkInterfaces-获得网络接口列表。"><a href="#os-networkInterfaces-获得网络接口列表。" class="headerlink" title="os.networkInterfaces() 获得网络接口列表。"></a><code>os.networkInterfaces()</code> 获得网络接口列表。</h4><h3 id="属性-1"><a href="#属性-1" class="headerlink" title="属性"></a>属性</h3><h4 id="os-EOL-定义了操作系统的行尾符的常量。"><a href="#os-EOL-定义了操作系统的行尾符的常量。" class="headerlink" title="os.EOL 定义了操作系统的行尾符的常量。"></a><code>os.EOL</code> 定义了操作系统的行尾符的常量。</h4><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">'os'</span>);</span><br><span class="line"><span class="comment">// 返回操作系统的默认临时文件夹。</span></span><br><span class="line"><span class="built_in">console</span>.log(os.tmpdir()); </span><br><span class="line"><span class="comment">// 返回操作系统名</span></span><br><span class="line"><span class="built_in">console</span>.log(os.platform());</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输出：<br>C:\Users\ADMINI~1\AppData\Local\Temp<br>win32</p>
</blockquote>
<h2 id="Path模块"><a href="#Path模块" class="headerlink" title="Path模块"></a>Path模块</h2><h3 id="方法-2"><a href="#方法-2" class="headerlink" title="方法"></a>方法</h3><h4 id="path-normalize-p-规范化路径，注意’-’-和-‘-’。"><a href="#path-normalize-p-规范化路径，注意’-’-和-‘-’。" class="headerlink" title="path.normalize(p) 规范化路径，注意’..’ 和 ‘.’。"></a><code>path.normalize(p)</code> 规范化路径，注意’..’ 和 ‘.’。</h4><h4 id="path-join-path1-path2-用于连接路径。该方法的主要用途在于，会正确使用当前系统的路径分隔符，Unix系统是”-“，Windows系统是”-”。"><a href="#path-join-path1-path2-用于连接路径。该方法的主要用途在于，会正确使用当前系统的路径分隔符，Unix系统是”-“，Windows系统是”-”。" class="headerlink" title="path.join([path1][, path2][, ...]) 用于连接路径。该方法的主要用途在于，会正确使用当前系统的路径分隔符，Unix系统是”/“，Windows系统是”\”。"></a><code>path.join([path1][, path2][, ...])</code> 用于连接路径。该方法的主要用途在于，会正确使用当前系统的路径分隔符，Unix系统是”/“，Windows系统是”\”。</h4><h4 id="path-resolve-from-to-将-to-参数解析为绝对路径。"><a href="#path-resolve-from-to-将-to-参数解析为绝对路径。" class="headerlink" title="path.resolve([from ...], to) 将 to 参数解析为绝对路径。"></a><code>path.resolve([from ...], to)</code> 将 to 参数解析为绝对路径。</h4><h4 id="path-isAbsolute-path-判断参数-path-是否是绝对路径。"><a href="#path-isAbsolute-path-判断参数-path-是否是绝对路径。" class="headerlink" title="path.isAbsolute(path) 判断参数 path 是否是绝对路径。"></a><code>path.isAbsolute(path)</code> 判断参数 path 是否是绝对路径。</h4><h4 id="path-relative-from-to-用于将相对路径转为绝对路径。"><a href="#path-relative-from-to-用于将相对路径转为绝对路径。" class="headerlink" title="path.relative(from, to) 用于将相对路径转为绝对路径。"></a><code>path.relative(from, to)</code> 用于将相对路径转为绝对路径。</h4><h4 id="path-dirname-p-返回路径中代表文件夹的部分，同-Unix-的dirname-命令类似。"><a href="#path-dirname-p-返回路径中代表文件夹的部分，同-Unix-的dirname-命令类似。" class="headerlink" title="path.dirname(p) 返回路径中代表文件夹的部分，同 Unix 的dirname 命令类似。"></a><code>path.dirname(p)</code> 返回路径中代表文件夹的部分，同 Unix 的dirname 命令类似。</h4><h4 id="path-basename-p-ext-返回路径中的最后一部分。同-Unix-命令-bashname-类似。"><a href="#path-basename-p-ext-返回路径中的最后一部分。同-Unix-命令-bashname-类似。" class="headerlink" title="path.basename(p[, ext]) 返回路径中的最后一部分。同 Unix 命令 bashname 类似。"></a><code>path.basename(p[, ext])</code> 返回路径中的最后一部分。同 Unix 命令 bashname 类似。</h4><h4 id="path-extname-p-返回路径中文件的后缀名，即路径中最后一个’-’之后的部分。如果一个路径中并不包含’-’或该路径只包含一个’-’-且这个’-’为路径的第一个字符，则此命令返回空字符串。"><a href="#path-extname-p-返回路径中文件的后缀名，即路径中最后一个’-’之后的部分。如果一个路径中并不包含’-’或该路径只包含一个’-’-且这个’-’为路径的第一个字符，则此命令返回空字符串。" class="headerlink" title="path.extname(p) 返回路径中文件的后缀名，即路径中最后一个’.’之后的部分。如果一个路径中并不包含’.’或该路径只包含一个’.’ 且这个’.’为路径的第一个字符，则此命令返回空字符串。"></a><code>path.extname(p)</code> 返回路径中文件的后缀名，即路径中最后一个’.’之后的部分。如果一个路径中并不包含’.’或该路径只包含一个’.’ 且这个’.’为路径的第一个字符，则此命令返回空字符串。</h4><h4 id="path-parse-pathString-返回路径字符串的对象。"><a href="#path-parse-pathString-返回路径字符串的对象。" class="headerlink" title="path.parse(pathString) 返回路径字符串的对象。"></a><code>path.parse(pathString)</code> 返回路径字符串的对象。</h4><h4 id="path-format-pathObject-从对象中返回路径字符串，和-path-parse-相反。"><a href="#path-format-pathObject-从对象中返回路径字符串，和-path-parse-相反。" class="headerlink" title="path.format(pathObject) 从对象中返回路径字符串，和 path.parse 相反。"></a><code>path.format(pathObject)</code> 从对象中返回路径字符串，和 path.parse 相反。</h4><h3 id="属性-2"><a href="#属性-2" class="headerlink" title="属性"></a>属性</h3><h4 id="path-sep-平台的文件路径分隔符，’-‘-或-‘-‘。"><a href="#path-sep-平台的文件路径分隔符，’-‘-或-‘-‘。" class="headerlink" title="path.sep 平台的文件路径分隔符，’\‘ 或 ‘/‘。"></a><code>path.sep</code> 平台的文件路径分隔符，’\‘ 或 ‘/‘。</h4><h4 id="path-delimiter-平台的分隔符-or-‘-’"><a href="#path-delimiter-平台的分隔符-or-‘-’" class="headerlink" title="path.delimiter 平台的分隔符, ; or ‘:’."></a><code>path.delimiter</code> 平台的分隔符, ; or ‘:’.</h4><h4 id="path-posix-提供上述-path-的方法，不过总是以-posix-兼容的方式交互。"><a href="#path-posix-提供上述-path-的方法，不过总是以-posix-兼容的方式交互。" class="headerlink" title="path.posix 提供上述 path 的方法，不过总是以 posix 兼容的方式交互。"></a><code>path.posix</code> 提供上述 path 的方法，不过总是以 posix 兼容的方式交互。</h4><h4 id="path-win32-提供上述-path-的方法，不过总是以-win32-兼容的方式交互"><a href="#path-win32-提供上述-path-的方法，不过总是以-win32-兼容的方式交互" class="headerlink" title="path.win32 提供上述 path 的方法，不过总是以 win32 兼容的方式交互"></a><code>path.win32</code> 提供上述 path 的方法，不过总是以 win32 兼容的方式交互</h4><h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="comment">// 判断是否是绝对路径</span></span><br><span class="line"><span class="built_in">console</span>.log(path.isAbsolute(<span class="string">"C:/\Users/\ADMINI~1/\AppData/\Local/\Temp/\test.txt"</span>));</span><br><span class="line"><span class="comment">//返回路径中文件的后缀名</span></span><br><span class="line"><span class="built_in">console</span>.log(path.extname(<span class="string">"C:/\Users/\ADMINI~1/\AppData/\Local/\Temp/\test.txt"</span>));</span><br><span class="line"><span class="comment">//平台的分隔符</span></span><br><span class="line"><span class="built_in">console</span>.log(path.delimiter);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输出<br>true<br>.txt<br>;</p>
</blockquote>
<h2 id="Net模块"><a href="#Net模块" class="headerlink" title="Net模块"></a>Net模块</h2><h3 id="方法-3"><a href="#方法-3" class="headerlink" title="方法"></a>方法</h3><h4 id="net-createServer-options-connectionListener-创建一个-TCP-服务器。参数-connectionListener-自动给-‘connection’-事件创建监听器。"><a href="#net-createServer-options-connectionListener-创建一个-TCP-服务器。参数-connectionListener-自动给-‘connection’-事件创建监听器。" class="headerlink" title="net.createServer([options][, connectionListener]) 创建一个 TCP 服务器。参数 connectionListener 自动给 ‘connection’ 事件创建监听器。"></a><code>net.createServer([options][, connectionListener])</code> 创建一个 TCP 服务器。参数 connectionListener 自动给 ‘connection’ 事件创建监听器。</h4><h4 id="net-connect-options-connectionListener-返回一个新的-‘net-Socket’，并连接到指定的地址和端口。"><a href="#net-connect-options-connectionListener-返回一个新的-‘net-Socket’，并连接到指定的地址和端口。" class="headerlink" title="net.connect(options[, connectionListener]) 返回一个新的 ‘net.Socket’，并连接到指定的地址和端口。"></a><code>net.connect(options[, connectionListener])</code> 返回一个新的 ‘net.Socket’，并连接到指定的地址和端口。</h4><p>当 socket 建立的时候，将会触发 ‘connect’ 事件。</p>
<h4 id="net-createConnection-options-connectionListener-创建一个到端口-port-和-主机-host的-TCP-连接。-host-默认为-‘localhost’。"><a href="#net-createConnection-options-connectionListener-创建一个到端口-port-和-主机-host的-TCP-连接。-host-默认为-‘localhost’。" class="headerlink" title="net.createConnection(options[, connectionListener]) 创建一个到端口 port 和 主机 host的 TCP 连接。 host 默认为 ‘localhost’。"></a><code>net.createConnection(options[, connectionListener])</code> 创建一个到端口 port 和 主机 host的 TCP 连接。 host 默认为 ‘localhost’。</h4><h4 id="net-connect-port-host-connectListener-创建一个端口为-port-和主机为-host的-TCP-连接-。host-默认为-‘localhost’。参数-connectListener-将会作为监听器添加到-‘connect’-事件。返回-‘net-Socket’。"><a href="#net-connect-port-host-connectListener-创建一个端口为-port-和主机为-host的-TCP-连接-。host-默认为-‘localhost’。参数-connectListener-将会作为监听器添加到-‘connect’-事件。返回-‘net-Socket’。" class="headerlink" title="net.connect(port[, host][, connectListener]) 创建一个端口为 port 和主机为 host的 TCP 连接 。host 默认为 ‘localhost’。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件。返回 ‘net.Socket’。"></a><code>net.connect(port[, host][, connectListener])</code> 创建一个端口为 port 和主机为 host的 TCP 连接 。host 默认为 ‘localhost’。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件。返回 ‘net.Socket’。</h4><h4 id="net-createConnection-port-host-connectListener-创建一个端口为-port-和主机为-host的-TCP-连接-。host-默认为-‘localhost’。参数-connectListener-将会作为监听器添加到-‘connect’-事件。返回-‘net-Socket’。"><a href="#net-createConnection-port-host-connectListener-创建一个端口为-port-和主机为-host的-TCP-连接-。host-默认为-‘localhost’。参数-connectListener-将会作为监听器添加到-‘connect’-事件。返回-‘net-Socket’。" class="headerlink" title="net.createConnection(port[, host][, connectListener]) 创建一个端口为 port 和主机为 host的 TCP 连接 。host 默认为 ‘localhost’。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件。返回 ‘net.Socket’。"></a><code>net.createConnection(port[, host][, connectListener])</code> 创建一个端口为 port 和主机为 host的 TCP 连接 。host 默认为 ‘localhost’。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件。返回 ‘net.Socket’。</h4><h4 id="net-connect-path-connectListener-创建连接到-path-的-unix-socket-。参数-connectListener-将会作为监听器添加到-‘connect’-事件上。返回-‘net-Socket’。"><a href="#net-connect-path-connectListener-创建连接到-path-的-unix-socket-。参数-connectListener-将会作为监听器添加到-‘connect’-事件上。返回-‘net-Socket’。" class="headerlink" title="net.connect(path[, connectListener]) 创建连接到 path 的 unix socket 。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件上。返回 ‘net.Socket’。"></a><code>net.connect(path[, connectListener])</code> 创建连接到 path 的 unix socket 。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件上。返回 ‘net.Socket’。</h4><h4 id="net-createConnection-path-connectListener-创建连接到-path-的-unix-socket-。参数-connectListener-将会作为监听器添加到-‘connect’-事件。返回-‘net-Socket’。"><a href="#net-createConnection-path-connectListener-创建连接到-path-的-unix-socket-。参数-connectListener-将会作为监听器添加到-‘connect’-事件。返回-‘net-Socket’。" class="headerlink" title="net.createConnection(path[, connectListener]) 创建连接到 path 的 unix socket 。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件。返回 ‘net.Socket’。"></a><code>net.createConnection(path[, connectListener])</code> 创建连接到 path 的 unix socket 。参数 connectListener 将会作为监听器添加到 ‘connect’ 事件。返回 ‘net.Socket’。</h4><h4 id="net-isIP-input-检测输入的是否为-IP-地址。-IPV4-返回-4，-IPV6-返回-6，其他情况返回-0。"><a href="#net-isIP-input-检测输入的是否为-IP-地址。-IPV4-返回-4，-IPV6-返回-6，其他情况返回-0。" class="headerlink" title="net.isIP(input) 检测输入的是否为 IP 地址。 IPV4 返回 4， IPV6 返回 6，其他情况返回 0。"></a><code>net.isIP(input)</code> 检测输入的是否为 IP 地址。 IPV4 返回 4， IPV6 返回 6，其他情况返回 0。</h4><h4 id="net-isIPv4-input-如果输入的地址为-IPV4，-返回-true，否则返回-false。"><a href="#net-isIPv4-input-如果输入的地址为-IPV4，-返回-true，否则返回-false。" class="headerlink" title="net.isIPv4(input) 如果输入的地址为 IPV4， 返回 true，否则返回 false。"></a><code>net.isIPv4(input)</code> 如果输入的地址为 IPV4， 返回 true，否则返回 false。</h4><h4 id="net-isIPv6-input-如果输入的地址为-IPV6，-返回-true，否则返回-false。"><a href="#net-isIPv6-input-如果输入的地址为-IPV6，-返回-true，否则返回-false。" class="headerlink" title="net.isIPv6(input) 如果输入的地址为 IPV6， 返回 true，否则返回 false。"></a><code>net.isIPv6(input)</code> 如果输入的地址为 IPV6， 返回 true，否则返回 false。</h4><h3 id="net-Server"><a href="#net-Server" class="headerlink" title="net.Server"></a>net.Server</h3><blockquote>
<p>net.Server通常用于创建一个 TCP 或本地服务器</p>
</blockquote>
<h4 id="server-listen-port-host-backlog-callback-监听指定端口-port-和-主机-host-ac连接。-默认情况下-host-接受任何-IPv4-地址-INADDR-ANY-的直接连接。端口-port-为-0-时，则会分配一个随机端口。"><a href="#server-listen-port-host-backlog-callback-监听指定端口-port-和-主机-host-ac连接。-默认情况下-host-接受任何-IPv4-地址-INADDR-ANY-的直接连接。端口-port-为-0-时，则会分配一个随机端口。" class="headerlink" title="server.listen(port[, host][, backlog][, callback]) 监听指定端口 port 和 主机 host ac连接。 默认情况下 host 接受任何 IPv4 地址(INADDR_ANY)的直接连接。端口 port 为 0 时，则会分配一个随机端口。"></a><code>server.listen(port[, host][, backlog][, callback])</code> 监听指定端口 port 和 主机 host ac连接。 默认情况下 host 接受任何 IPv4 地址(INADDR_ANY)的直接连接。端口 port 为 0 时，则会分配一个随机端口。</h4><h4 id="server-listen-path-callback-通过指定-path-的连接，启动一个本地-socket-服务器。"><a href="#server-listen-path-callback-通过指定-path-的连接，启动一个本地-socket-服务器。" class="headerlink" title="server.listen(path[, callback]) 通过指定 path 的连接，启动一个本地 socket 服务器。"></a><code>server.listen(path[, callback])</code> 通过指定 path 的连接，启动一个本地 socket 服务器。</h4><h4 id="server-listen-handle-callback-通过指定句柄连接。"><a href="#server-listen-handle-callback-通过指定句柄连接。" class="headerlink" title="server.listen(handle[, callback]) 通过指定句柄连接。"></a><code>server.listen(handle[, callback])</code> 通过指定句柄连接。</h4><h4 id="server-listen-options-callback-options-的属性：端口-port-主机-host-和-backlog-以及可选参数-callback-函数-他们在一起调用server-listen-port-host-backlog-callback-。还有，参数-path-可以用来指定-UNIX-socket。"><a href="#server-listen-options-callback-options-的属性：端口-port-主机-host-和-backlog-以及可选参数-callback-函数-他们在一起调用server-listen-port-host-backlog-callback-。还有，参数-path-可以用来指定-UNIX-socket。" class="headerlink" title="server.listen(options[, callback]) options 的属性：端口 port, 主机 host, 和 backlog, 以及可选参数 callback 函数, 他们在一起调用server.listen(port, [host], [backlog], [callback])。还有，参数 path 可以用来指定 UNIX socket。"></a><code>server.listen(options[, callback])</code> options 的属性：端口 port, 主机 host, 和 backlog, 以及可选参数 callback 函数, 他们在一起调用server.listen(port, [host], [backlog], [callback])。还有，参数 path 可以用来指定 UNIX socket。</h4><h4 id="server-close-callback-服务器停止接收新的连接，保持现有连接。这是异步函数，当所有连接结束的时候服务器会关闭，并会触发-‘close’-事件。"><a href="#server-close-callback-服务器停止接收新的连接，保持现有连接。这是异步函数，当所有连接结束的时候服务器会关闭，并会触发-‘close’-事件。" class="headerlink" title="server.close([callback]) 服务器停止接收新的连接，保持现有连接。这是异步函数，当所有连接结束的时候服务器会关闭，并会触发 ‘close’ 事件。"></a><code>server.close([callback])</code> 服务器停止接收新的连接，保持现有连接。这是异步函数，当所有连接结束的时候服务器会关闭，并会触发 ‘close’ 事件。</h4><h4 id="server-address-操作系统返回绑定的地址，协议族名和服务器端口。"><a href="#server-address-操作系统返回绑定的地址，协议族名和服务器端口。" class="headerlink" title="server.address() 操作系统返回绑定的地址，协议族名和服务器端口。"></a><code>server.address()</code> 操作系统返回绑定的地址，协议族名和服务器端口。</h4><h4 id="server-unref-如果这是事件系统中唯一一个活动的服务器，调用-unref-将允许程序退出。"><a href="#server-unref-如果这是事件系统中唯一一个活动的服务器，调用-unref-将允许程序退出。" class="headerlink" title="server.unref() 如果这是事件系统中唯一一个活动的服务器，调用 unref 将允许程序退出。"></a><code>server.unref()</code> 如果这是事件系统中唯一一个活动的服务器，调用 unref 将允许程序退出。</h4><h4 id="server-ref-与-unref-相反，如果这是唯一的服务器，在之前被-unref-了的服务器上调用-ref-将不会让程序退出（默认行为）。如果服务器已经被-ref，则再次调用-ref-并不会产生影响。"><a href="#server-ref-与-unref-相反，如果这是唯一的服务器，在之前被-unref-了的服务器上调用-ref-将不会让程序退出（默认行为）。如果服务器已经被-ref，则再次调用-ref-并不会产生影响。" class="headerlink" title="server.ref() 与 unref 相反，如果这是唯一的服务器，在之前被 unref 了的服务器上调用 ref 将不会让程序退出（默认行为）。如果服务器已经被 ref，则再次调用 ref 并不会产生影响。"></a><code>server.ref()</code> 与 unref 相反，如果这是唯一的服务器，在之前被 unref 了的服务器上调用 ref 将不会让程序退出（默认行为）。如果服务器已经被 ref，则再次调用 ref 并不会产生影响。</h4><h4 id="server-getConnections-callback-异步获取服务器当前活跃连接的数量。当-socket-发送给子进程后才有效；回调函数有-2-个参数-err-和-count。"><a href="#server-getConnections-callback-异步获取服务器当前活跃连接的数量。当-socket-发送给子进程后才有效；回调函数有-2-个参数-err-和-count。" class="headerlink" title="server.getConnections(callback) 异步获取服务器当前活跃连接的数量。当 socket 发送给子进程后才有效；回调函数有 2 个参数 err 和 count。"></a><code>server.getConnections(callback)</code> 异步获取服务器当前活跃连接的数量。当 socket 发送给子进程后才有效；回调函数有 2 个参数 err 和 count。</h4><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><h4 id="listening-当服务器调用-server-listen-绑定后会触发。"><a href="#listening-当服务器调用-server-listen-绑定后会触发。" class="headerlink" title="listening 当服务器调用 server.listen 绑定后会触发。"></a><code>listening</code> 当服务器调用 server.listen 绑定后会触发。</h4><h4 id="connection-当新连接创建后会被触发。socket-是-net-Socket实例。"><a href="#connection-当新连接创建后会被触发。socket-是-net-Socket实例。" class="headerlink" title="connection 当新连接创建后会被触发。socket 是 net.Socket实例。"></a><code>connection</code> 当新连接创建后会被触发。socket 是 net.Socket实例。</h4><h4 id="close-服务器关闭时会触发。注意，如果存在连接，这个事件不会被触发直到所有的连接关闭。"><a href="#close-服务器关闭时会触发。注意，如果存在连接，这个事件不会被触发直到所有的连接关闭。" class="headerlink" title="close 服务器关闭时会触发。注意，如果存在连接，这个事件不会被触发直到所有的连接关闭。"></a><code>close</code> 服务器关闭时会触发。注意，如果存在连接，这个事件不会被触发直到所有的连接关闭。</h4><h4 id="error-发生错误时触发。’close’-事件将被下列事件直接调用。"><a href="#error-发生错误时触发。’close’-事件将被下列事件直接调用。" class="headerlink" title="error 发生错误时触发。’close’ 事件将被下列事件直接调用。"></a><code>error</code> 发生错误时触发。’close’ 事件将被下列事件直接调用。</h4><h3 id="net-Socket"><a href="#net-Socket" class="headerlink" title="net.Socket"></a>net.Socket</h3><blockquote>
<p>net.Socket 对象是 TCP 或 UNIX Socket 的抽象。net.Socket 实例实现了一个双工流接口。 他们可以在用户创建客户端(使用 connect())时使用, 或者由 Node 创建它们，并通过 connection 服务器事件传递给用户。</p>
</blockquote>
<h3 id="net-Socket事件"><a href="#net-Socket事件" class="headerlink" title="net.Socket事件"></a>net.Socket事件</h3><h4 id="lookup-在解析域名后，但在连接前，触发这个事件。对-UNIX-sokcet-不适用。"><a href="#lookup-在解析域名后，但在连接前，触发这个事件。对-UNIX-sokcet-不适用。" class="headerlink" title="lookup 在解析域名后，但在连接前，触发这个事件。对 UNIX sokcet 不适用。"></a><code>lookup</code> 在解析域名后，但在连接前，触发这个事件。对 UNIX sokcet 不适用。</h4><h4 id="connect-成功建立-socket-连接时触发。"><a href="#connect-成功建立-socket-连接时触发。" class="headerlink" title="connect 成功建立 socket 连接时触发。"></a><code>connect</code> 成功建立 socket 连接时触发。</h4><h4 id="data-当接收到数据时触发。"><a href="#data-当接收到数据时触发。" class="headerlink" title="data 当接收到数据时触发。"></a><code>data</code> 当接收到数据时触发。</h4><h4 id="end-当-socket-另一端发送-FIN-包时，触发该事件。"><a href="#end-当-socket-另一端发送-FIN-包时，触发该事件。" class="headerlink" title="end 当 socket 另一端发送 FIN 包时，触发该事件。"></a><code>end</code> 当 socket 另一端发送 FIN 包时，触发该事件。</h4><h4 id="timeout-当-socket-空闲超时时触发，仅是表明-socket-已经空闲。用户必须手动关闭连接。"><a href="#timeout-当-socket-空闲超时时触发，仅是表明-socket-已经空闲。用户必须手动关闭连接。" class="headerlink" title="timeout 当 socket 空闲超时时触发，仅是表明 socket 已经空闲。用户必须手动关闭连接。"></a><code>timeout</code> 当 socket 空闲超时时触发，仅是表明 socket 已经空闲。用户必须手动关闭连接。</h4><h4 id="drain-当写缓存为空得时候触发。可用来控制上传。"><a href="#drain-当写缓存为空得时候触发。可用来控制上传。" class="headerlink" title="drain 当写缓存为空得时候触发。可用来控制上传。"></a><code>drain</code> 当写缓存为空得时候触发。可用来控制上传。</h4><h4 id="error-错误发生时触发。"><a href="#error-错误发生时触发。" class="headerlink" title="error 错误发生时触发。"></a><code>error</code> 错误发生时触发。</h4><h4 id="close-当-socket-完全关闭时触发。参数-had-error-是布尔值，它表示是否因为传输错误导致-socket-关闭。"><a href="#close-当-socket-完全关闭时触发。参数-had-error-是布尔值，它表示是否因为传输错误导致-socket-关闭。" class="headerlink" title="close 当 socket 完全关闭时触发。参数 had_error 是布尔值，它表示是否因为传输错误导致 socket 关闭。"></a><code>close</code> 当 socket 完全关闭时触发。参数 had_error 是布尔值，它表示是否因为传输错误导致 socket 关闭。</h4><h3 id="net-Socket属性"><a href="#net-Socket属性" class="headerlink" title="net.Socket属性"></a>net.Socket属性</h3><h4 id="socket-bufferSize-该属性显示了要写入缓冲区的字节数。"><a href="#socket-bufferSize-该属性显示了要写入缓冲区的字节数。" class="headerlink" title="socket.bufferSize 该属性显示了要写入缓冲区的字节数。"></a><code>socket.bufferSize</code> 该属性显示了要写入缓冲区的字节数。</h4><h4 id="socket-remoteAddress-远程的-IP-地址字符串，例如：’74-125-127-100’-or-‘2001-4860-a005-68’。"><a href="#socket-remoteAddress-远程的-IP-地址字符串，例如：’74-125-127-100’-or-‘2001-4860-a005-68’。" class="headerlink" title="socket.remoteAddress 远程的 IP 地址字符串，例如：’74.125.127.100’ or ‘2001:4860:a005::68’。"></a><code>socket.remoteAddress</code> 远程的 IP 地址字符串，例如：’74.125.127.100’ or ‘2001:4860:a005::68’。</h4><h4 id="socket-remoteFamily-远程IP协议族字符串，比如-‘IPv4’-or-‘IPv6’。"><a href="#socket-remoteFamily-远程IP协议族字符串，比如-‘IPv4’-or-‘IPv6’。" class="headerlink" title="socket.remoteFamily 远程IP协议族字符串，比如 ‘IPv4’ or ‘IPv6’。"></a><code>socket.remoteFamily</code> 远程IP协议族字符串，比如 ‘IPv4’ or ‘IPv6’。</h4><h4 id="socket-remotePort-远程端口，数字表示，例如：80-or-21。"><a href="#socket-remotePort-远程端口，数字表示，例如：80-or-21。" class="headerlink" title="socket.remotePort 远程端口，数字表示，例如：80 or 21。"></a><code>socket.remotePort</code> 远程端口，数字表示，例如：80 or 21。</h4><h4 id="socket-localAddress-网络连接绑定的本地接口-远程客户端正在连接的本地-IP-地址，字符串表示。例如，如果你在监听’0-0-0-0’而客户端连接在’192-168-1-1’，这个值就会是-‘192-168-1-1’。"><a href="#socket-localAddress-网络连接绑定的本地接口-远程客户端正在连接的本地-IP-地址，字符串表示。例如，如果你在监听’0-0-0-0’而客户端连接在’192-168-1-1’，这个值就会是-‘192-168-1-1’。" class="headerlink" title="socket.localAddress 网络连接绑定的本地接口 远程客户端正在连接的本地 IP 地址，字符串表示。例如，如果你在监听’0.0.0.0’而客户端连接在’192.168.1.1’，这个值就会是 ‘192.168.1.1’。"></a><code>socket.localAddress</code> 网络连接绑定的本地接口 远程客户端正在连接的本地 IP 地址，字符串表示。例如，如果你在监听’0.0.0.0’而客户端连接在’192.168.1.1’，这个值就会是 ‘192.168.1.1’。</h4><h4 id="socket-localPort-本地端口地址，数字表示。例如：80-or-21。"><a href="#socket-localPort-本地端口地址，数字表示。例如：80-or-21。" class="headerlink" title="socket.localPort 本地端口地址，数字表示。例如：80 or 21。"></a><code>socket.localPort</code> 本地端口地址，数字表示。例如：80 or 21。</h4><h4 id="socket-bytesRead-接收到得字节数。"><a href="#socket-bytesRead-接收到得字节数。" class="headerlink" title="socket.bytesRead 接收到得字节数。"></a><code>socket.bytesRead</code> 接收到得字节数。</h4><h4 id="socket-bytesWritten-发送的字节数。"><a href="#socket-bytesWritten-发送的字节数。" class="headerlink" title="socket.bytesWritten 发送的字节数。"></a><code>socket.bytesWritten</code> 发送的字节数。</h4><h3 id="net-Socket方法"><a href="#net-Socket方法" class="headerlink" title="net.Socket方法"></a>net.Socket方法</h3><h4 id="new-net-Socket-options-构造一个新的-socket-对象。"><a href="#new-net-Socket-options-构造一个新的-socket-对象。" class="headerlink" title="new net.Socket([options]) 构造一个新的 socket 对象。"></a><code>new net.Socket([options])</code> 构造一个新的 socket 对象。</h4><h4 id="socket-connect-port-host-connectListener-指定端口-port-和-主机-host，创建-socket-连接-。参数-host-默认为-localhost。通常情况不需要使用-net-createConnection-打开-socket。只有你实现了自己的-socket-时才会用到。"><a href="#socket-connect-port-host-connectListener-指定端口-port-和-主机-host，创建-socket-连接-。参数-host-默认为-localhost。通常情况不需要使用-net-createConnection-打开-socket。只有你实现了自己的-socket-时才会用到。" class="headerlink" title="socket.connect(port[, host][, connectListener]) 指定端口 port 和 主机 host，创建 socket 连接 。参数 host 默认为 localhost。通常情况不需要使用 net.createConnection 打开 socket。只有你实现了自己的 socket 时才会用到。"></a><code>socket.connect(port[, host][, connectListener])</code> 指定端口 port 和 主机 host，创建 socket 连接 。参数 host 默认为 localhost。通常情况不需要使用 net.createConnection 打开 socket。只有你实现了自己的 socket 时才会用到。</h4><h4 id="socket-connect-path-connectListener-打开指定路径的-unix-socket。通常情况不需要使用-net-createConnection-打开-socket。只有你实现了自己的-socket-时才会用到。"><a href="#socket-connect-path-connectListener-打开指定路径的-unix-socket。通常情况不需要使用-net-createConnection-打开-socket。只有你实现了自己的-socket-时才会用到。" class="headerlink" title="socket.connect(path[, connectListener]) 打开指定路径的 unix socket。通常情况不需要使用 net.createConnection 打开 socket。只有你实现了自己的 socket 时才会用到。"></a><code>socket.connect(path[, connectListener])</code> 打开指定路径的 unix socket。通常情况不需要使用 net.createConnection 打开 socket。只有你实现了自己的 socket 时才会用到。</h4><h4 id="socket-setEncoding-encoding-设置编码"><a href="#socket-setEncoding-encoding-设置编码" class="headerlink" title="socket.setEncoding([encoding]) 设置编码"></a><code>socket.setEncoding([encoding])</code> 设置编码</h4><h4 id="socket-write-data-encoding-callback-在-socket-上发送数据。第二个参数指定了字符串的编码，默认是-UTF8-编码。"><a href="#socket-write-data-encoding-callback-在-socket-上发送数据。第二个参数指定了字符串的编码，默认是-UTF8-编码。" class="headerlink" title="socket.write(data[, encoding][, callback]) 在 socket 上发送数据。第二个参数指定了字符串的编码，默认是 UTF8 编码。"></a><code>socket.write(data[, encoding][, callback])</code> 在 socket 上发送数据。第二个参数指定了字符串的编码，默认是 UTF8 编码。</h4><h4 id="socket-end-data-encoding-半关闭-socket。例如，它发送一个-FIN-包。可能服务器仍在发送数据。"><a href="#socket-end-data-encoding-半关闭-socket。例如，它发送一个-FIN-包。可能服务器仍在发送数据。" class="headerlink" title="socket.end([data][, encoding]) 半关闭 socket。例如，它发送一个 FIN 包。可能服务器仍在发送数据。"></a><code>socket.end([data][, encoding])</code> 半关闭 socket。例如，它发送一个 FIN 包。可能服务器仍在发送数据。</h4><h4 id="socket-destroy-确保没有-I-O-活动在这个套接字上。只有在错误发生情况下才需要。（处理错误等等）。"><a href="#socket-destroy-确保没有-I-O-活动在这个套接字上。只有在错误发生情况下才需要。（处理错误等等）。" class="headerlink" title="socket.destroy() 确保没有 I/O 活动在这个套接字上。只有在错误发生情况下才需要。（处理错误等等）。"></a><code>socket.destroy()</code> 确保没有 I/O 活动在这个套接字上。只有在错误发生情况下才需要。（处理错误等等）。</h4><h4 id="socket-pause-暂停读取数据。就是说，不会再触发-data-事件。对于控制上传非常有用。"><a href="#socket-pause-暂停读取数据。就是说，不会再触发-data-事件。对于控制上传非常有用。" class="headerlink" title="socket.pause() 暂停读取数据。就是说，不会再触发 data 事件。对于控制上传非常有用。"></a><code>socket.pause()</code> 暂停读取数据。就是说，不会再触发 data 事件。对于控制上传非常有用。</h4><h4 id="socket-resume-调用-pause-后想恢复读取数据。"><a href="#socket-resume-调用-pause-后想恢复读取数据。" class="headerlink" title="socket.resume() 调用 pause() 后想恢复读取数据。"></a><code>socket.resume()</code> 调用 pause() 后想恢复读取数据。</h4><h4 id="socket-setTimeout-timeout-callback-socket-闲置时间超过-timeout-毫秒后-，将-socket-设置为超时。"><a href="#socket-setTimeout-timeout-callback-socket-闲置时间超过-timeout-毫秒后-，将-socket-设置为超时。" class="headerlink" title="socket.setTimeout(timeout[, callback]) socket 闲置时间超过 timeout 毫秒后 ，将 socket 设置为超时。"></a><code>socket.setTimeout(timeout[, callback])</code> socket 闲置时间超过 timeout 毫秒后 ，将 socket 设置为超时。</h4><h4 id="socket-setNoDelay-noDelay-禁用纳格（Nagle）算法。默认情况下-TCP-连接使用纳格算法，在发送前他们会缓冲数据。将-noDelay-设置为-true-将会在调用-socket-write-时立即发送数据。noDelay-默认值为-true。"><a href="#socket-setNoDelay-noDelay-禁用纳格（Nagle）算法。默认情况下-TCP-连接使用纳格算法，在发送前他们会缓冲数据。将-noDelay-设置为-true-将会在调用-socket-write-时立即发送数据。noDelay-默认值为-true。" class="headerlink" title="socket.setNoDelay([noDelay]) 禁用纳格（Nagle）算法。默认情况下 TCP 连接使用纳格算法，在发送前他们会缓冲数据。将 noDelay 设置为 true 将会在调用 socket.write() 时立即发送数据。noDelay 默认值为 true。"></a><code>socket.setNoDelay([noDelay])</code> 禁用纳格（Nagle）算法。默认情况下 TCP 连接使用纳格算法，在发送前他们会缓冲数据。将 noDelay 设置为 true 将会在调用 socket.write() 时立即发送数据。noDelay 默认值为 true。</h4><h4 id="socket-setKeepAlive-enable-initialDelay-禁用-启用长连接功能，并在发送第一个在闲置-socket-上的长连接-probe-之前，可选地设定初始延时。默认为-false。-设定-initialDelay-（毫秒），来设定收到的最后一个数据包和第一个长连接probe之间的延时。将-initialDelay-设为0，将会保留默认（或者之前）的值。默认值为0"><a href="#socket-setKeepAlive-enable-initialDelay-禁用-启用长连接功能，并在发送第一个在闲置-socket-上的长连接-probe-之前，可选地设定初始延时。默认为-false。-设定-initialDelay-（毫秒），来设定收到的最后一个数据包和第一个长连接probe之间的延时。将-initialDelay-设为0，将会保留默认（或者之前）的值。默认值为0" class="headerlink" title="socket.setKeepAlive([enable][, initialDelay]) 禁用/启用长连接功能，并在发送第一个在闲置 socket 上的长连接 probe 之前，可选地设定初始延时。默认为 false。 设定 initialDelay （毫秒），来设定收到的最后一个数据包和第一个长连接probe之间的延时。将 initialDelay 设为0，将会保留默认（或者之前）的值。默认值为0."></a><code>socket.setKeepAlive([enable][, initialDelay])</code> 禁用/启用长连接功能，并在发送第一个在闲置 socket 上的长连接 probe 之前，可选地设定初始延时。默认为 false。 设定 initialDelay （毫秒），来设定收到的最后一个数据包和第一个长连接probe之间的延时。将 initialDelay 设为0，将会保留默认（或者之前）的值。默认值为0.</h4><h4 id="socket-address-操作系统返回绑定的地址，协议族名和服务器端口。返回的对象有-3-个属性，比如-port-12346-family-‘IPv4’-address-‘127-0-0-1’-。"><a href="#socket-address-操作系统返回绑定的地址，协议族名和服务器端口。返回的对象有-3-个属性，比如-port-12346-family-‘IPv4’-address-‘127-0-0-1’-。" class="headerlink" title="socket.address() 操作系统返回绑定的地址，协议族名和服务器端口。返回的对象有 3 个属性，比如{ port: 12346, family: ‘IPv4’, address: ‘127.0.0.1’ }。"></a><code>socket.address()</code> 操作系统返回绑定的地址，协议族名和服务器端口。返回的对象有 3 个属性，比如{ port: 12346, family: ‘IPv4’, address: ‘127.0.0.1’ }。</h4><h4 id="socket-unref-如果这是事件系统中唯一一个活动的服务器，调用-unref-将允许程序退出。如果服务器已被-unref，则再次调用-unref-并不会产生影响。"><a href="#socket-unref-如果这是事件系统中唯一一个活动的服务器，调用-unref-将允许程序退出。如果服务器已被-unref，则再次调用-unref-并不会产生影响。" class="headerlink" title="socket.unref() 如果这是事件系统中唯一一个活动的服务器，调用 unref 将允许程序退出。如果服务器已被 unref，则再次调用 unref 并不会产生影响。"></a><code>socket.unref()</code> 如果这是事件系统中唯一一个活动的服务器，调用 unref 将允许程序退出。如果服务器已被 unref，则再次调用 unref 并不会产生影响。</h4><h4 id="socket-ref-与-unref-相反，如果这是唯一的服务器，在之前被-unref-了的服务器上调用-ref-将不会让程序退出（默认行为）。如果服务器已经被-ref，则再次调用-ref-并不会产生影响。"><a href="#socket-ref-与-unref-相反，如果这是唯一的服务器，在之前被-unref-了的服务器上调用-ref-将不会让程序退出（默认行为）。如果服务器已经被-ref，则再次调用-ref-并不会产生影响。" class="headerlink" title="socket.ref() 与 unref 相反，如果这是唯一的服务器，在之前被 unref 了的服务器上调用 ref 将不会让程序退出（默认行为）。如果服务器已经被 ref，则再次调用 ref 并不会产生影响。"></a><code>socket.ref()</code> 与 unref 相反，如果这是唯一的服务器，在之前被 unref 了的服务器上调用 ref 将不会让程序退出（默认行为）。如果服务器已经被 ref，则再次调用 ref 并不会产生影响。</h4><h3 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h3><blockquote>
<p>Telnet 服务器实例</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> net = <span class="built_in">require</span>(<span class="string">'net'</span>);</span><br><span class="line">chat = net.createServer();</span><br><span class="line"><span class="comment">//但客户端连接时</span></span><br><span class="line">chat.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">client</span>)</span>&#123;</span><br><span class="line">	<span class="comment">// 给客户端发送Hello World</span></span><br><span class="line">	client.write(<span class="string">'hello world'</span>);</span><br><span class="line">	<span class="comment">// 当接收到发来信息时</span></span><br><span class="line">	client.on(<span class="string">'data'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(data.toString());</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">chat.listen(<span class="number">9000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'server ok'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在Windows Dos界面(cmd)，输入: telnet 127.0.0.1 9000</p>
</blockquote>
<p><img src="http://i.imgur.com/MD3nyZv.png" alt="Telnet服务器实例"></p>
<h2 id="DNS模块"><a href="#DNS模块" class="headerlink" title="DNS模块"></a>DNS模块</h2><h3 id="方法-4"><a href="#方法-4" class="headerlink" title="方法"></a>方法</h3><h4 id="dns-lookup-hostname-options-callback-将域名（比如-‘runoob-com’）解析为第一条找到的记录-A-（IPV4）或-AAAA-IPV6-。参数-options可以是一个对象或整数。如果没有提供-options，IP-v4-和-v6-地址都可以。如果-options-是整数，则必须是-4-或-6。"><a href="#dns-lookup-hostname-options-callback-将域名（比如-‘runoob-com’）解析为第一条找到的记录-A-（IPV4）或-AAAA-IPV6-。参数-options可以是一个对象或整数。如果没有提供-options，IP-v4-和-v6-地址都可以。如果-options-是整数，则必须是-4-或-6。" class="headerlink" title="dns.lookup(hostname[, options], callback) 将域名（比如 ‘runoob.com’）解析为第一条找到的记录 A （IPV4）或 AAAA(IPV6)。参数 options可以是一个对象或整数。如果没有提供 options，IP v4 和 v6 地址都可以。如果 options 是整数，则必须是 4 或 6。"></a><code>dns.lookup(hostname[, options], callback)</code> 将域名（比如 ‘runoob.com’）解析为第一条找到的记录 A （IPV4）或 AAAA(IPV6)。参数 options可以是一个对象或整数。如果没有提供 options，IP v4 和 v6 地址都可以。如果 options 是整数，则必须是 4 或 6。</h4><h4 id="dns-lookupService-address-port-callback-使用-getnameinfo-解析传入的地址和端口为域名和服务。"><a href="#dns-lookupService-address-port-callback-使用-getnameinfo-解析传入的地址和端口为域名和服务。" class="headerlink" title="dns.lookupService(address, port, callback) 使用 getnameinfo 解析传入的地址和端口为域名和服务。"></a><code>dns.lookupService(address, port, callback)</code> 使用 getnameinfo 解析传入的地址和端口为域名和服务。</h4><h4 id="dns-resolve-hostname-rrtype-callback-将一个域名（如-‘runoob-com’）解析为一个-rrtype-指定记录类型的数组。"><a href="#dns-resolve-hostname-rrtype-callback-将一个域名（如-‘runoob-com’）解析为一个-rrtype-指定记录类型的数组。" class="headerlink" title="dns.resolve(hostname[, rrtype], callback) 将一个域名（如 ‘runoob.com’）解析为一个 rrtype 指定记录类型的数组。"></a><code>dns.resolve(hostname[, rrtype], callback)</code> 将一个域名（如 ‘runoob.com’）解析为一个 rrtype 指定记录类型的数组。</h4><h4 id="dns-resolve4-hostname-callback-和-dns-resolve-类似-仅能查询-IPv4-A-记录）。-addresses-IPv4-地址数组-比如，-‘74-125-79-104’-‘74-125-79-105’-‘74-125-79-106’-）。"><a href="#dns-resolve4-hostname-callback-和-dns-resolve-类似-仅能查询-IPv4-A-记录）。-addresses-IPv4-地址数组-比如，-‘74-125-79-104’-‘74-125-79-105’-‘74-125-79-106’-）。" class="headerlink" title="dns.resolve4(hostname, callback) 和 dns.resolve() 类似, 仅能查询 IPv4 (A 记录）。 addresses IPv4 地址数组 (比如，[‘74.125.79.104’, ‘74.125.79.105’, ‘74.125.79.106’]）。"></a><code>dns.resolve4(hostname, callback)</code> 和 dns.resolve() 类似, 仅能查询 IPv4 (A 记录）。 addresses IPv4 地址数组 (比如，[‘74.125.79.104’, ‘74.125.79.105’, ‘74.125.79.106’]）。</h4><h4 id="dns-resolve6-hostname-callback-和-dns-resolve4-类似，-仅能查询-IPv6-AAAA-查询）"><a href="#dns-resolve6-hostname-callback-和-dns-resolve4-类似，-仅能查询-IPv6-AAAA-查询）" class="headerlink" title="dns.resolve6(hostname, callback) 和 dns.resolve4() 类似， 仅能查询 IPv6( AAAA 查询）"></a><code>dns.resolve6(hostname, callback)</code> 和 dns.resolve4() 类似， 仅能查询 IPv6( AAAA 查询）</h4><h4 id="dns-resolveMx-hostname-callback-和-dns-resolve-类似-仅能查询邮件交换-MX-记录-。"><a href="#dns-resolveMx-hostname-callback-和-dns-resolve-类似-仅能查询邮件交换-MX-记录-。" class="headerlink" title="dns.resolveMx(hostname, callback) 和 dns.resolve() 类似, 仅能查询邮件交换(MX 记录)。"></a><code>dns.resolveMx(hostname, callback)</code> 和 dns.resolve() 类似, 仅能查询邮件交换(MX 记录)。</h4><h4 id="dns-resolveTxt-hostname-callback-和-dns-resolve-类似-仅能进行文本查询-TXT-记录）。-addresses-是-2-d-文本记录数组。-比如，-‘v-spf1-ip4-0-0-0-0-‘-‘-all’-）。-每个子数组包含一条记录的-TXT-块。根据使用情况可以连接在一起，也可单独使用。"><a href="#dns-resolveTxt-hostname-callback-和-dns-resolve-类似-仅能进行文本查询-TXT-记录）。-addresses-是-2-d-文本记录数组。-比如，-‘v-spf1-ip4-0-0-0-0-‘-‘-all’-）。-每个子数组包含一条记录的-TXT-块。根据使用情况可以连接在一起，也可单独使用。" class="headerlink" title="dns.resolveTxt(hostname, callback) 和 dns.resolve() 类似, 仅能进行文本查询 (TXT 记录）。 addresses 是 2-d 文本记录数组。(比如，[ [‘v=spf1 ip4:0.0.0.0 ‘, ‘~all’ ] ]）。 每个子数组包含一条记录的 TXT 块。根据使用情况可以连接在一起，也可单独使用。"></a><code>dns.resolveTxt(hostname, callback)</code> 和 dns.resolve() 类似, 仅能进行文本查询 (TXT 记录）。 addresses 是 2-d 文本记录数组。(比如，[ [‘v=spf1 ip4:0.0.0.0 ‘, ‘~all’ ] ]）。 每个子数组包含一条记录的 TXT 块。根据使用情况可以连接在一起，也可单独使用。</h4><h4 id="dns-resolveSrv-hostname-callback-和-dns-resolve-类似-仅能进行服务记录查询-SRV-记录）。-addresses-是-hostname可用的-SRV-记录数组。-SRV-记录属性有优先级（priority），权重（weight）-端口（port）-和名字（name）-比如，-‘priority’-10-‘weight’-5-‘port’-21223-‘name’-‘service-example-com’-…-）。"><a href="#dns-resolveSrv-hostname-callback-和-dns-resolve-类似-仅能进行服务记录查询-SRV-记录）。-addresses-是-hostname可用的-SRV-记录数组。-SRV-记录属性有优先级（priority），权重（weight）-端口（port）-和名字（name）-比如，-‘priority’-10-‘weight’-5-‘port’-21223-‘name’-‘service-example-com’-…-）。" class="headerlink" title="dns.resolveSrv(hostname, callback) 和 dns.resolve() 类似, 仅能进行服务记录查询 (SRV 记录）。 addresses 是 hostname可用的 SRV 记录数组。 SRV 记录属性有优先级（priority），权重（weight）, 端口（port）, 和名字（name） (比如，[{‘priority’: 10, ‘weight’: 5, ‘port’: 21223, ‘name’: ‘service.example.com’}, …]）。"></a><code>dns.resolveSrv(hostname, callback)</code> 和 dns.resolve() 类似, 仅能进行服务记录查询 (SRV 记录）。 addresses 是 hostname可用的 SRV 记录数组。 SRV 记录属性有优先级（priority），权重（weight）, 端口（port）, 和名字（name） (比如，[{‘priority’: 10, ‘weight’: 5, ‘port’: 21223, ‘name’: ‘service.example.com’}, …]）。</h4><h4 id="dns-resolveSoa-hostname-callback-和-dns-resolve-类似-仅能查询权威记录-SOA-记录）。"><a href="#dns-resolveSoa-hostname-callback-和-dns-resolve-类似-仅能查询权威记录-SOA-记录）。" class="headerlink" title="dns.resolveSoa(hostname, callback) 和 dns.resolve() 类似, 仅能查询权威记录(SOA 记录）。"></a><code>dns.resolveSoa(hostname, callback)</code> 和 dns.resolve() 类似, 仅能查询权威记录(SOA 记录）。</h4><h4 id="dns-resolveNs-hostname-callback-和-dns-resolve-类似-仅能进行域名服务器记录查询-NS-记录）。-addresses-是域名服务器记录数组（hostname-可以使用）-比如-‘ns1-example-com’-‘ns2-example-com’-）。"><a href="#dns-resolveNs-hostname-callback-和-dns-resolve-类似-仅能进行域名服务器记录查询-NS-记录）。-addresses-是域名服务器记录数组（hostname-可以使用）-比如-‘ns1-example-com’-‘ns2-example-com’-）。" class="headerlink" title="dns.resolveNs(hostname, callback) 和 dns.resolve() 类似, 仅能进行域名服务器记录查询(NS 记录）。 addresses 是域名服务器记录数组（hostname 可以使用） (比如, [‘ns1.example.com’, ‘ns2.example.com’]）。"></a><code>dns.resolveNs(hostname, callback)</code> 和 dns.resolve() 类似, 仅能进行域名服务器记录查询(NS 记录）。 addresses 是域名服务器记录数组（hostname 可以使用） (比如, [‘ns1.example.com’, ‘ns2.example.com’]）。</h4><h4 id="dns-resolveCname-hostname-callback-和-dns-resolve-类似-仅能进行别名记录查询-CNAME记录-。addresses-是对-hostname-可用的别名记录数组-比如，-‘bar-example-com’-）。"><a href="#dns-resolveCname-hostname-callback-和-dns-resolve-类似-仅能进行别名记录查询-CNAME记录-。addresses-是对-hostname-可用的别名记录数组-比如，-‘bar-example-com’-）。" class="headerlink" title="dns.resolveCname(hostname, callback) 和 dns.resolve() 类似, 仅能进行别名记录查询 (CNAME记录)。addresses 是对 hostname 可用的别名记录数组 (比如，, [‘bar.example.com’]）。"></a><code>dns.resolveCname(hostname, callback)</code> 和 dns.resolve() 类似, 仅能进行别名记录查询 (CNAME记录)。addresses 是对 hostname 可用的别名记录数组 (比如，, [‘bar.example.com’]）。</h4><h4 id="dns-reverse-ip-callback-反向解析-IP-地址，指向该-IP-地址的域名数组。"><a href="#dns-reverse-ip-callback-反向解析-IP-地址，指向该-IP-地址的域名数组。" class="headerlink" title="dns.reverse(ip, callback) 反向解析 IP 地址，指向该 IP 地址的域名数组。"></a><code>dns.reverse(ip, callback)</code> 反向解析 IP 地址，指向该 IP 地址的域名数组。</h4><h4 id="dns-getServers-返回一个用于当前解析的-IP-地址数组的字符串。"><a href="#dns-getServers-返回一个用于当前解析的-IP-地址数组的字符串。" class="headerlink" title="dns.getServers() 返回一个用于当前解析的 IP 地址数组的字符串。"></a><code>dns.getServers()</code> 返回一个用于当前解析的 IP 地址数组的字符串。</h4><h4 id="dns-setServers-servers-指定一组-IP-地址作为解析服务器。"><a href="#dns-setServers-servers-指定一组-IP-地址作为解析服务器。" class="headerlink" title="dns.setServers(servers) 指定一组 IP 地址作为解析服务器。"></a><code>dns.setServers(servers)</code> 指定一组 IP 地址作为解析服务器。</h4><h3 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dns = <span class="built_in">require</span>(<span class="string">'dns'</span>);</span><br><span class="line">domain = <span class="string">"www.baidu.com"</span>;</span><br><span class="line"><span class="comment">// 通过域名找IP</span></span><br><span class="line">dns.lookup(domain,<span class="function"><span class="keyword">function</span>(<span class="params">err,ip,family</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'IP is ：'</span> + ip);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输出： IP is ：14.215.177.38</p>
</blockquote>
<h2 id="Domain模块"><a href="#Domain模块" class="headerlink" title="Domain模块"></a>Domain模块</h2><h3 id="方法-5"><a href="#方法-5" class="headerlink" title="方法"></a>方法</h3><h4 id="domain-run-function-在域的上下文运行提供的函数，隐式的绑定了所有的事件分发器，计时器和底层请求。"><a href="#domain-run-function-在域的上下文运行提供的函数，隐式的绑定了所有的事件分发器，计时器和底层请求。" class="headerlink" title="domain.run(function) 在域的上下文运行提供的函数，隐式的绑定了所有的事件分发器，计时器和底层请求。"></a><code>domain.run(function)</code> 在域的上下文运行提供的函数，隐式的绑定了所有的事件分发器，计时器和底层请求。</h4><h4 id="domain-add-emitter-显式的增加事件"><a href="#domain-add-emitter-显式的增加事件" class="headerlink" title="domain.add(emitter) 显式的增加事件"></a><code>domain.add(emitter)</code> 显式的增加事件</h4><h4 id="domain-remove-emitter-删除事件。"><a href="#domain-remove-emitter-删除事件。" class="headerlink" title="domain.remove(emitter) 删除事件。"></a><code>domain.remove(emitter)</code> 删除事件。</h4><h4 id="domain-bind-callback-返回的函数是一个对于所提供的回调函数的包装函数。当调用这个返回的函数被时，所有被抛出的错误都会被导向到这个域的-error-事件。"><a href="#domain-bind-callback-返回的函数是一个对于所提供的回调函数的包装函数。当调用这个返回的函数被时，所有被抛出的错误都会被导向到这个域的-error-事件。" class="headerlink" title="domain.bind(callback) 返回的函数是一个对于所提供的回调函数的包装函数。当调用这个返回的函数被时，所有被抛出的错误都会被导向到这个域的 error 事件。"></a><code>domain.bind(callback)</code> 返回的函数是一个对于所提供的回调函数的包装函数。当调用这个返回的函数被时，所有被抛出的错误都会被导向到这个域的 error 事件。</h4><h4 id="domain-intercept-callback-和-domain-bind-callback-类似。除了捕捉被抛出的错误外，它还会拦截-Error-对象作为参数传递到这个函数。"><a href="#domain-intercept-callback-和-domain-bind-callback-类似。除了捕捉被抛出的错误外，它还会拦截-Error-对象作为参数传递到这个函数。" class="headerlink" title="domain.intercept(callback) 和 domain.bind(callback) 类似。除了捕捉被抛出的错误外，它还会拦截 Error 对象作为参数传递到这个函数。"></a><code>domain.intercept(callback)</code> 和 domain.bind(callback) 类似。除了捕捉被抛出的错误外，它还会拦截 Error 对象作为参数传递到这个函数。</h4><h4 id="domain-enter-进入一个异步调用的上下文，绑定到domain。"><a href="#domain-enter-进入一个异步调用的上下文，绑定到domain。" class="headerlink" title="domain.enter() 进入一个异步调用的上下文，绑定到domain。"></a><code>domain.enter()</code> 进入一个异步调用的上下文，绑定到domain。</h4><h4 id="domain-exit-退出当前的domain，切换到不同的链的异步调用的上下文中。对应domain-enter-。"><a href="#domain-exit-退出当前的domain，切换到不同的链的异步调用的上下文中。对应domain-enter-。" class="headerlink" title="domain.exit() 退出当前的domain，切换到不同的链的异步调用的上下文中。对应domain.enter()。"></a><code>domain.exit()</code> 退出当前的domain，切换到不同的链的异步调用的上下文中。对应domain.enter()。</h4><h4 id="domain-dispose-释放一个domain对象，让node进程回收这部分资源。"><a href="#domain-dispose-释放一个domain对象，让node进程回收这部分资源。" class="headerlink" title="domain.dispose() 释放一个domain对象，让node进程回收这部分资源。"></a><code>domain.dispose()</code> 释放一个domain对象，让node进程回收这部分资源。</h4><h4 id="domain-create-返回一个domain对象。"><a href="#domain-create-返回一个domain对象。" class="headerlink" title="domain.create() 返回一个domain对象。"></a><code>domain.create()</code> 返回一个domain对象。</h4><h3 id="属性-3"><a href="#属性-3" class="headerlink" title="属性"></a>属性</h3><h4 id="domain-members-已加入domain对象的域定时器和事件发射器的数组。"><a href="#domain-members-已加入domain对象的域定时器和事件发射器的数组。" class="headerlink" title="domain.members 已加入domain对象的域定时器和事件发射器的数组。"></a><code>domain.members</code> 已加入domain对象的域定时器和事件发射器的数组。</h4><h1 id="MySql"><a href="#MySql" class="headerlink" title="MySql"></a>MySql</h1><blockquote>
<p>首先安装mysql模块<br>通过命令：npm install mysql<br>创建数据库node_mysql<br>创建user表,表字典如下</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">字段名</th>
<th style="text-align:center">属性</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">id</td>
<td style="text-align:center">int</td>
<td style="text-align:center">主键</td>
</tr>
<tr>
<td style="text-align:center">name</td>
<td style="text-align:center">varchar</td>
<td style="text-align:center">非空</td>
</tr>
<tr>
<td style="text-align:center">age</td>
<td style="text-align:center">int</td>
<td style="text-align:center">非空</td>
</tr>
</tbody>
</table>
<blockquote>
<p>数据库插入数据后的表</p>
</blockquote>
<p><img src="http://i.imgur.com/zfZFrxW.png" alt=""></p>
<h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询数据</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>);</span><br><span class="line">conn = mysql.createConnection(&#123;</span><br><span class="line">	host:<span class="string">'localhost'</span>,</span><br><span class="line">	user:<span class="string">'root'</span>,</span><br><span class="line">	password:<span class="string">'abcdef123'</span>,</span><br><span class="line">	port:<span class="string">'3306'</span>,</span><br><span class="line">	database:<span class="string">'node_mysql'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//建立连接</span></span><br><span class="line">conn.connect();</span><br><span class="line"><span class="comment">//准备sql语句</span></span><br><span class="line">sql = <span class="string">"select * from user"</span>;</span><br><span class="line"><span class="comment">//查询数据库</span></span><br><span class="line">conn.query(sql,<span class="function"><span class="keyword">function</span>(<span class="params">err,result</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'error:'</span>,err.message);</span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; result.length; i++)&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">"id  :"</span> + result[i][<span class="string">'id'</span>]);</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">"name:"</span> + result[i][<span class="string">'name'</span>]);</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">"age :"</span> + result[i][<span class="string">'age'</span>]);</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">"-----------------"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//关闭数据库连接</span></span><br><span class="line">conn.end();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输出结果：<br><br>id  :1<br><br>name:Gavin<br><br>age :16<br><br>-—————-<br><br>id  :2<br><br>name:Gavin<br><br>age :18<br><br>-—————-</p>
</blockquote>
<h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//插入数据</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>);</span><br><span class="line">conn = mysql.createConnection(&#123;</span><br><span class="line">	host:<span class="string">'localhost'</span>, </span><br><span class="line">	user:<span class="string">'root'</span>,</span><br><span class="line">	password:<span class="string">'abcdef123'</span>,</span><br><span class="line">	port:<span class="string">'3306'</span>,</span><br><span class="line">	database:<span class="string">'node_mysql'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//建立连接</span></span><br><span class="line">conn.connect();</span><br><span class="line"><span class="comment">//准备sql语句</span></span><br><span class="line">sql = <span class="string">"insert into user(name,age) values(?,?)"</span>;</span><br><span class="line">data = [<span class="string">'Gavin'</span>,<span class="string">'22'</span>];</span><br><span class="line"><span class="comment">//查询数据库</span></span><br><span class="line">conn.query(sql,data,<span class="function"><span class="keyword">function</span>(<span class="params">err,result</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'error:'</span>,err.message);</span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'AffectedRows :'</span>,result[<span class="string">'affectedRows'</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//关闭数据库连接</span></span><br><span class="line">conn.end();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输出：AffectedRows : 1 </p>
</blockquote>
<p><img src="http://i.imgur.com/Bs7FpEK.png" alt=""></p>
<h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//更新数据</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>);</span><br><span class="line">conn = mysql.createConnection(&#123;</span><br><span class="line">	host:<span class="string">'localhost'</span>, </span><br><span class="line">	user:<span class="string">'root'</span>,</span><br><span class="line">	password:<span class="string">'abcdef123'</span>,</span><br><span class="line">	port:<span class="string">'3306'</span>,</span><br><span class="line">	database:<span class="string">'node_mysql'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//建立连接</span></span><br><span class="line">conn.connect();</span><br><span class="line"><span class="comment">//准备sql语句</span></span><br><span class="line">sql = <span class="string">"update user set age=? where id=?"</span>;</span><br><span class="line">data = [<span class="string">'15'</span>,<span class="string">'1'</span>];</span><br><span class="line"><span class="comment">//查询数据库</span></span><br><span class="line">conn.query(sql,data,<span class="function"><span class="keyword">function</span>(<span class="params">err,result</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'error:'</span>,err.message);</span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'AffectedRows :'</span>,result[<span class="string">'affectedRows'</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//关闭数据库连接</span></span><br><span class="line">conn.end();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输出：AffectedRows : 1</p>
</blockquote>
<p><img src="http://i.imgur.com/CnZsCyo.png" alt=""></p>
<h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除数据</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>);</span><br><span class="line">conn = mysql.createConnection(&#123;</span><br><span class="line">	host:<span class="string">'localhost'</span>, </span><br><span class="line">	user:<span class="string">'root'</span>,</span><br><span class="line">	password:<span class="string">'abcdef123'</span>,</span><br><span class="line">	port:<span class="string">'3306'</span>,</span><br><span class="line">	database:<span class="string">'node_mysql'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//建立连接</span></span><br><span class="line">conn.connect();</span><br><span class="line"><span class="comment">//准备sql语句</span></span><br><span class="line">sql = <span class="string">"delete from user where id=1"</span>;</span><br><span class="line"><span class="comment">//查询数据库</span></span><br><span class="line">conn.query(sql,<span class="function"><span class="keyword">function</span>(<span class="params">err,result</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'error:'</span>,err.message);</span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'AffectedRows :'</span>,result[<span class="string">'affectedRows'</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//关闭数据库连接</span></span><br><span class="line">conn.end();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输出：AffectedRows : 1</p>
</blockquote>
<p><img src="http://i.imgur.com/44bkwD6.png" alt="删除数据"></p>
<h1 id="HTTP模块"><a href="#HTTP模块" class="headerlink" title="HTTP模块"></a>HTTP模块</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引用模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个服务器，回调函数表示接收到请求之后做的事情</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//req参数表示请求，res表示响应</span></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"服务器接收到了请求"</span> + req.url);</span><br><span class="line">	<span class="comment">//设置头部</span></span><br><span class="line">	res.writeHead(<span class="number">200</span>,&#123;<span class="string">"Content-Type"</span>:<span class="string">"text/html;charset=UTF8"</span>&#125;);</span><br><span class="line">	res.write(<span class="string">"&lt;h1&gt;我是主标题&lt;/h1&gt;"</span>);</span><br><span class="line">	res.write(<span class="string">"&lt;h2&gt;我是2标题&lt;/h2&gt;"</span>);</span><br><span class="line">	res.write(<span class="string">"&lt;h3&gt;我是3标题&lt;/h3&gt;"</span>);</span><br><span class="line">	res.end((<span class="number">1</span>+<span class="number">2</span>+<span class="number">3</span>).toString());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="string">"127.0.0.1"</span>);</span><br></pre></td></tr></table></figure>
<h2 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h2><h3 id="url-模块"><a href="#url-模块" class="headerlink" title="url 模块"></a>url 模块</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(req.url);</span><br><span class="line">	res.end();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="string">"127.0.0.1"</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">"url"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//url.parse()可以将一个完整的URL地址，分为很多部分：</span></span><br><span class="line">	<span class="comment">//host、port、pathname、path、query</span></span><br><span class="line">	<span class="keyword">var</span> pathname = url.parse(req.url).pathname;</span><br><span class="line">	<span class="comment">//url.parse()如果第二个参数是true，那么就可以将所有的查询变为对象</span></span><br><span class="line">	<span class="comment">//就可以直接打点得到这个参数</span></span><br><span class="line">	<span class="keyword">var</span> query = url.parse(req.url,<span class="literal">true</span>).query;</span><br><span class="line">	<span class="comment">//直接打点得到这个参数</span></span><br><span class="line">	<span class="keyword">var</span> age = query.age;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"pathname:"</span> + pathname);</span><br><span class="line">	<span class="built_in">console</span>.log(query);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"age:"</span> + age);</span><br><span class="line">	</span><br><span class="line">	res.end();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="string">"127.0.0.1"</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>输入网址：<a href="http://localhost:3000/?age=18">http://localhost:3000/?age=18</a><br><br>输出：<br><br>pathname:/<br><br>{ age: ‘18’ } <br><br>age:18 <br></p>
</blockquote>
<h1 id="静态文件夹"><a href="#静态文件夹" class="headerlink" title="静态文件夹"></a>静态文件夹</h1><blockquote>
<p>访问静态文件夹<br><br>文件目录<br></p>
<ul>
<li>static<ul>
<li>index.html</li>
<li>404.html</li>
</ul>
</li>
<li>app.js</li>
</ul>
</blockquote>
<hr>
<blockquote>
<p>app.js</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">"url"</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>); </span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 获取用户的路径</span></span><br><span class="line">    <span class="keyword">var</span> pathname = url.parse(req.url).pathname;</span><br><span class="line">    <span class="comment">// 获取拓展名</span></span><br><span class="line">	<span class="keyword">var</span> extname = path.extname(pathname);</span><br><span class="line">    <span class="comment">// 读取这个文件</span></span><br><span class="line">    fs.readFile(<span class="string">"./static/"</span> + pathname, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            <span class="comment">// 如果此文件不存在， 就返回404返回</span></span><br><span class="line">            fs.readFile(<span class="string">"./static/404.html"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">                res.writeHead(<span class="number">404</span>, &#123;<span class="string">"Content-type"</span>: <span class="string">"text/html;charset = UTF8"</span>&#125;);</span><br><span class="line">                res.end(data);</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">var</span> mime = getMime(extname);</span><br><span class="line">		res.writeHead(<span class="number">200</span>,&#123;<span class="string">"Content-type"</span>:mime&#125;);</span><br><span class="line">        res.end(data);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMime</span>(<span class="params">extname</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(extname)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">".html"</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"text/html"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">".jpg"</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"image/jpg"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">".css"</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"text/css"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">".js"</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"text/javascript"</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="string">"127.0.0.1"</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>static/index.html</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是一个静态的HTML页面<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>static/404.html</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是一个404页面<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>--></div><iframe src="/donate/?AliPayQR=/img/AliPayQR.png&amp;WeChatQR=/img/WeChatQR.png&amp;GitHub=https://github.com/1558198727&amp;BTCQR=/img/BTCQR.png&amp;BTCKEY=null&amp;PayPal=null" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="https://codingyunhao.github.io/2018/04/28/node/" data-id="cjgixn37k0002sgwaihijcfof" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACHUlEQVR42u3aQXLCMAwFUO5/6XTbmQ7hSzYdkJ9XnQCJXxaqJOvxiNf1ayVX/l6/v/Oze25eGBgYX8u4btf9d+4B+UafsZO9YWBgnMNIQmEejhNegkx+hYGBgbESEBNe7/VhYGBg9AJuXl1+9P8NDAyMD2YkZWq1KM1/VS2eMTAwTmPkXff///st5xsYGBhfxbiKq5fS5SHyai0MDIzZjDzAVVPAFVhzPxgYGEMZK8MTvaZ/0kS7D+6Ffh4GBsZQxt46uBpke+NiGBgYsxl56bhru70QXMhwMTAwhjKShK86ctE75qyGZgwMjBMY+cNWWm95vVkOr9V3hoGBMYKRt/tXEse97TkMDIzZjLzHno9zreDzQ4goBGNgYIxjVBO7aqpXDdZLaSIGBsYgRvXBScDNN10tj6NhCwwMjGMY1UZYcrfeK4iehYGBcQCjGl6TlK46wLHSwsPAwJjNeEdTLM/Zqnndi08xMDBGM/L2Vi+JzEvZfA/R4AUGBsYgxq42fZ4OJtRqWYuBgXEyoxoi81bdttNXDAyMYxjVQ8RqkVlt2zWnRTAwMMYx1hO7vE32jvIYAwPjBEYv2N0/cr3ztzKQgYGBMZXRa5CVTx7i71cDNwYGxjmMXuDbUENvaslhYGBg9LLL3lFl3s7DwMDA2Btwe8efhaYeBgbGAYzeYNb9JqpXeocQGBgYJzCWSsc4BK8khbtCPwYGxhcyfgAJf2qYIg6iIAAAAABJRU5ErkJggg==">分享</a><div class="tags"><a href="/tags/nodejs/">nodejs</a></div><div class="post-nav"><a class="pre" href="/2018/04/28/Part3000IsAlreadyInUse/">Part3000IsAlreadyInUse</a><a class="next" href="/2018/04/28/chat/">BLChat</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'GpSFOvGfsPjtpa4YBqCys9ql-gzGzoHsz',
  appKey:'eDuELsQDe0I5QvlPCSmYpFnV',
  placeholder:'留下您的意见',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/后端/">后端</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构/">数据结构</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/梦创例会/">梦创例会</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/BLChat/" style="font-size: 15px;">BLChat</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a> <a href="/tags/梦创/" style="font-size: 15px;">梦创</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/开学/" style="font-size: 15px;">开学</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/在腾讯云上搭建个人静态博客-1/">在腾讯云上搭建个人静态博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/在腾讯云上搭建个人静态博客/">在腾讯云上搭建个人静态博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/图的邻接矩阵表示广度深度遍历大连理工大学数据结构上机/">图的广度深度优先遍历</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/例会笔记（2）/">梦创例会笔记（2）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/例会笔记（1）/">梦创例会笔记（1）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/开学/">开学</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/第一篇博客/">第一篇博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/大连理工大学软件学院数据结构第四章第九题/">大连理工大学软件学院数据结构第四章第九题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/Part3000IsAlreadyInUse/">Part3000IsAlreadyInUse</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/node/">Node.js-Notes</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://liyunhao.cn/" title="liyunhao.cn" target="_blank">liyunhao.cn</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Jason.yunhao.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" color="100,99,98" opacity="0.5" zIndex="-1" count="150" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>